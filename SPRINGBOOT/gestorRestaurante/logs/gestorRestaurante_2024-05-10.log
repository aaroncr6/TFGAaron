2024-05-10 05:28:58.350 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool.run - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=9h4m38s342ms622µs500ns).
2024-05-10 15:16:46.006 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool.run - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=9h47m51s343ms401µs500ns).
2024-05-10 15:58:42.807 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 15:58:42.808 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 15:58:42.825 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 16 ms
2024-05-10 15:58:43.090 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0
2024-05-10 15:58:43.138 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user_role` r1_0 join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where r1_0.`user_id`=?
2024-05-10 15:58:43.146 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user_role` r1_0 join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where r1_0.`user_id`=?
2024-05-10 15:58:43.148 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user_role` r1_0 join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where r1_0.`user_id`=?
2024-05-10 16:12:19.568 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool.run - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=7m1s796ms207µs800ns).
2024-05-10 16:20:07.053 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool.run - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2m47s401ms557µs600ns).
2024-05-10 16:26:10.515 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`username`=?
2024-05-10 16:26:10.518 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user_role` r1_0 join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where r1_0.`user_id`=?
2024-05-10 16:26:10.590 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`email`=?
2024-05-10 16:26:10.763 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id` from `user` u1_0 where u1_0.`email`=?
2024-05-10 16:26:10.814 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - SELECT ur.role_id FROM user u          INNER JOIN user_role ur ON u.id = ur.user_id WHERE u.id = ?
2024-05-10 16:26:12.478 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 16:26:12.487 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL.logStatement - select dp1_0.`id_detalle_pedido`,dp1_0.`cantidad_detalle_pedido`,p1_0.`id`,p1_0.`estado`,p1_0.`fecha_fin`,p1_0.`fecha_inicio`,p1_0.`total_pedido`,u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,dp1_0.`precio_detalle_pedido`,p2_0.`id`,p2_0.`descripcion`,p2_0.`image`,p2_0.`ingredientes`,p2_0.`nombre`,p2_0.`nombre_categoria`,p2_0.`precio` from `detalle_pedido` dp1_0 left join `pedido` p1_0 on p1_0.`id`=dp1_0.`pedido_id` left join `user` u1_0 on u1_0.`id`=p1_0.`user_id` left join `producto` p2_0 on p2_0.`id`=dp1_0.`producto_id` where dp1_0.`producto_id`=?
2024-05-10 16:26:12.493 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL.logStatement - select dp1_0.`id_detalle_pedido`,dp1_0.`cantidad_detalle_pedido`,p1_0.`id`,p1_0.`estado`,p1_0.`fecha_fin`,p1_0.`fecha_inicio`,p1_0.`total_pedido`,u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,dp1_0.`precio_detalle_pedido`,p2_0.`id`,p2_0.`descripcion`,p2_0.`image`,p2_0.`ingredientes`,p2_0.`nombre`,p2_0.`nombre_categoria`,p2_0.`precio` from `detalle_pedido` dp1_0 left join `pedido` p1_0 on p1_0.`id`=dp1_0.`pedido_id` left join `user` u1_0 on u1_0.`id`=p1_0.`user_id` left join `producto` p2_0 on p2_0.`id`=dp1_0.`producto_id` where dp1_0.`producto_id`=?
2024-05-10 16:26:12.495 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL.logStatement - select dp1_0.`id_detalle_pedido`,dp1_0.`cantidad_detalle_pedido`,p1_0.`id`,p1_0.`estado`,p1_0.`fecha_fin`,p1_0.`fecha_inicio`,p1_0.`total_pedido`,u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,dp1_0.`precio_detalle_pedido`,p2_0.`id`,p2_0.`descripcion`,p2_0.`image`,p2_0.`ingredientes`,p2_0.`nombre`,p2_0.`nombre_categoria`,p2_0.`precio` from `detalle_pedido` dp1_0 left join `pedido` p1_0 on p1_0.`id`=dp1_0.`pedido_id` left join `user` u1_0 on u1_0.`id`=p1_0.`user_id` left join `producto` p2_0 on p2_0.`id`=dp1_0.`producto_id` where dp1_0.`producto_id`=?
2024-05-10 16:26:12.497 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL.logStatement - select dp1_0.`id_detalle_pedido`,dp1_0.`cantidad_detalle_pedido`,p1_0.`id`,p1_0.`estado`,p1_0.`fecha_fin`,p1_0.`fecha_inicio`,p1_0.`total_pedido`,u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,dp1_0.`precio_detalle_pedido`,p2_0.`id`,p2_0.`descripcion`,p2_0.`image`,p2_0.`ingredientes`,p2_0.`nombre`,p2_0.`nombre_categoria`,p2_0.`precio` from `detalle_pedido` dp1_0 left join `pedido` p1_0 on p1_0.`id`=dp1_0.`pedido_id` left join `user` u1_0 on u1_0.`id`=p1_0.`user_id` left join `producto` p2_0 on p2_0.`id`=dp1_0.`producto_id` where dp1_0.`producto_id`=?
2024-05-10 16:26:31.812 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 16:26:31.823 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 16:26:31.824 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 16:35:05.418 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 16:35:05.420 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL.logStatement - select dp1_0.`id_detalle_pedido`,dp1_0.`cantidad_detalle_pedido`,p1_0.`id`,p1_0.`estado`,p1_0.`fecha_fin`,p1_0.`fecha_inicio`,p1_0.`total_pedido`,u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,dp1_0.`precio_detalle_pedido`,p2_0.`id`,p2_0.`descripcion`,p2_0.`image`,p2_0.`ingredientes`,p2_0.`nombre`,p2_0.`nombre_categoria`,p2_0.`precio` from `detalle_pedido` dp1_0 left join `pedido` p1_0 on p1_0.`id`=dp1_0.`pedido_id` left join `user` u1_0 on u1_0.`id`=p1_0.`user_id` left join `producto` p2_0 on p2_0.`id`=dp1_0.`producto_id` where dp1_0.`producto_id`=?
2024-05-10 16:35:05.423 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL.logStatement - select dp1_0.`id_detalle_pedido`,dp1_0.`cantidad_detalle_pedido`,p1_0.`id`,p1_0.`estado`,p1_0.`fecha_fin`,p1_0.`fecha_inicio`,p1_0.`total_pedido`,u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,dp1_0.`precio_detalle_pedido`,p2_0.`id`,p2_0.`descripcion`,p2_0.`image`,p2_0.`ingredientes`,p2_0.`nombre`,p2_0.`nombre_categoria`,p2_0.`precio` from `detalle_pedido` dp1_0 left join `pedido` p1_0 on p1_0.`id`=dp1_0.`pedido_id` left join `user` u1_0 on u1_0.`id`=p1_0.`user_id` left join `producto` p2_0 on p2_0.`id`=dp1_0.`producto_id` where dp1_0.`producto_id`=?
2024-05-10 16:35:05.426 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL.logStatement - select dp1_0.`id_detalle_pedido`,dp1_0.`cantidad_detalle_pedido`,p1_0.`id`,p1_0.`estado`,p1_0.`fecha_fin`,p1_0.`fecha_inicio`,p1_0.`total_pedido`,u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,dp1_0.`precio_detalle_pedido`,p2_0.`id`,p2_0.`descripcion`,p2_0.`image`,p2_0.`ingredientes`,p2_0.`nombre`,p2_0.`nombre_categoria`,p2_0.`precio` from `detalle_pedido` dp1_0 left join `pedido` p1_0 on p1_0.`id`=dp1_0.`pedido_id` left join `user` u1_0 on u1_0.`id`=p1_0.`user_id` left join `producto` p2_0 on p2_0.`id`=dp1_0.`producto_id` where dp1_0.`producto_id`=?
2024-05-10 16:35:05.429 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL.logStatement - select dp1_0.`id_detalle_pedido`,dp1_0.`cantidad_detalle_pedido`,p1_0.`id`,p1_0.`estado`,p1_0.`fecha_fin`,p1_0.`fecha_inicio`,p1_0.`total_pedido`,u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,dp1_0.`precio_detalle_pedido`,p2_0.`id`,p2_0.`descripcion`,p2_0.`image`,p2_0.`ingredientes`,p2_0.`nombre`,p2_0.`nombre_categoria`,p2_0.`precio` from `detalle_pedido` dp1_0 left join `pedido` p1_0 on p1_0.`id`=dp1_0.`pedido_id` left join `user` u1_0 on u1_0.`id`=p1_0.`user_id` left join `producto` p2_0 on p2_0.`id`=dp1_0.`producto_id` where dp1_0.`producto_id`=?
2024-05-10 16:35:24.391 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 16:35:24.394 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 16:35:24.396 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 16:37:57.674 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 16:37:57.676 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 16:37:57.678 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 16:54:51.969 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-05-10 16:54:51.989 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 16:54:51.997 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 16:54:52.001 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 16:54:52.202 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 3868 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 16:54:52.203 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 16:54:52.766 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 16:54:52.803 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 35 ms. Found 5 JPA repository interfaces.
2024-05-10 16:54:53.054 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 16:54:53.056 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 16:54:53.056 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 16:54:53.083 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 16:54:53.083 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 874 ms
2024-05-10 16:54:53.171 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 16:54:53.230 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 16:54:53.233 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 16:54:53.239 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 16:54:53.240 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Starting...
2024-05-10 16:54:53.245 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-2 - Added connection org.mariadb.jdbc.Connection@74b91295
2024-05-10 16:54:53.246 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Start completed.
2024-05-10 16:54:53.437 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 16:54:53.463 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 16:54:54.114 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6d40c4c1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@77cdf7e9, org.springframework.security.web.context.SecurityContextHolderFilter@6a4335bf, org.springframework.security.web.header.HeaderWriterFilter@453a7757, org.springframework.security.web.authentication.logout.LogoutFilter@491a61a9, tfc.gestorRestaurante.security.JwtAuthenticationFilter@4fcbd695, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3f5c10e6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@294a4895, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@152b1eaf, org.springframework.security.web.session.SessionManagementFilter@5d29dee1, org.springframework.security.web.access.ExceptionTranslationFilter@3e1d7af3, org.springframework.security.web.access.intercept.AuthorizationFilter@6deb7fea]
2024-05-10 16:54:54.413 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 16:54:54.434 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 16:54:54.439 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 2.307 seconds (process running for 76545.952)
2024-05-10 16:54:54.442 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener.onApplicationEvent - Condition evaluation unchanged
2024-05-10 16:54:55.863 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2024-05-10 16:54:55.870 [Thread-7] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 16:54:55.871 [Thread-7] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown initiated...
2024-05-10 16:54:55.873 [Thread-7] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown completed.
2024-05-10 16:54:55.976 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 3868 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 16:54:55.977 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 16:54:56.358 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 16:54:56.390 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 30 ms. Found 5 JPA repository interfaces.
2024-05-10 16:54:56.606 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 16:54:56.608 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 16:54:56.608 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 16:54:56.629 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 16:54:56.629 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 650 ms
2024-05-10 16:54:56.692 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 16:54:56.755 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 16:54:56.758 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 16:54:56.765 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 16:54:56.767 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-3 - Starting...
2024-05-10 16:54:56.770 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-3 - Added connection org.mariadb.jdbc.Connection@179d43c5
2024-05-10 16:54:56.771 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-3 - Start completed.
2024-05-10 16:54:56.958 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 16:54:56.986 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 16:54:57.584 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@22331889, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3a7afda4, org.springframework.security.web.context.SecurityContextHolderFilter@463623f8, org.springframework.security.web.header.HeaderWriterFilter@5ed3d303, org.springframework.security.web.authentication.logout.LogoutFilter@2797f8cb, tfc.gestorRestaurante.security.JwtAuthenticationFilter@3e04b753, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@23f661af, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@637df519, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6d259412, org.springframework.security.web.session.SessionManagementFilter@17f49e69, org.springframework.security.web.access.ExceptionTranslationFilter@11de8f6e, org.springframework.security.web.access.intercept.AuthorizationFilter@3b25f044]
2024-05-10 16:54:57.839 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 16:54:57.863 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 16:54:57.869 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 1.933 seconds (process running for 76549.382)
2024-05-10 16:54:57.872 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener.onApplicationEvent - Condition evaluation unchanged
2024-05-10 16:55:05.921 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 16:55:05.923 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-3 - Shutdown initiated...
2024-05-10 16:55:05.927 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-3 - Shutdown completed.
2024-05-10 16:55:08.810 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 1272 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 16:55:08.813 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 16:55:08.858 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 16:55:08.858 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 16:55:10.000 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 16:55:10.083 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 76 ms. Found 5 JPA repository interfaces.
2024-05-10 16:55:10.928 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 16:55:10.942 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 16:55:10.942 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 16:55:11.012 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 16:55:11.013 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 2154 ms
2024-05-10 16:55:11.221 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 16:55:11.435 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 16:55:11.573 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 16:55:11.632 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 16:55:11.988 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 16:55:12.028 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 16:55:12.122 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@2eac7d52
2024-05-10 16:55:12.124 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 16:55:14.136 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 16:55:14.213 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 16:55:14.973 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 16:55:16.545 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7775fc47, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@579f0c98, org.springframework.security.web.context.SecurityContextHolderFilter@222fb1f5, org.springframework.security.web.header.HeaderWriterFilter@6eb516f7, org.springframework.security.web.authentication.logout.LogoutFilter@e728dc5, tfc.gestorRestaurante.security.JwtAuthenticationFilter@4d9bd69e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@704e7492, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3ec08a97, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6441c49, org.springframework.security.web.session.SessionManagementFilter@1a8aabc3, org.springframework.security.web.access.ExceptionTranslationFilter@6ea9cb1d, org.springframework.security.web.access.intercept.AuthorizationFilter@502e0c95]
2024-05-10 16:55:17.133 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 16:55:17.189 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 16:55:17.204 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 9.001 seconds (process running for 9.985)
2024-05-10 16:55:24.288 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 16:55:24.289 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 16:55:24.290 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 1 ms
2024-05-10 16:55:24.486 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 16:55:24.504 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 16:55:24.507 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 16:59:49.189 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 16:59:49.215 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select dp1_0.`id_detalle_pedido`,dp1_0.`cantidad_detalle_pedido`,p1_0.`id`,p1_0.`estado`,p1_0.`fecha_fin`,p1_0.`fecha_inicio`,p1_0.`total_pedido`,u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,dp1_0.`precio_detalle_pedido`,p2_0.`id`,p2_0.`descripcion`,p2_0.`image`,p2_0.`ingredientes`,p2_0.`nombre`,p2_0.`nombre_categoria`,p2_0.`precio` from `detalle_pedido` dp1_0 left join `pedido` p1_0 on p1_0.`id`=dp1_0.`pedido_id` left join `user` u1_0 on u1_0.`id`=p1_0.`user_id` left join `producto` p2_0 on p2_0.`id`=dp1_0.`producto_id` where dp1_0.`producto_id`=?
2024-05-10 16:59:49.219 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select dp1_0.`id_detalle_pedido`,dp1_0.`cantidad_detalle_pedido`,p1_0.`id`,p1_0.`estado`,p1_0.`fecha_fin`,p1_0.`fecha_inicio`,p1_0.`total_pedido`,u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,dp1_0.`precio_detalle_pedido`,p2_0.`id`,p2_0.`descripcion`,p2_0.`image`,p2_0.`ingredientes`,p2_0.`nombre`,p2_0.`nombre_categoria`,p2_0.`precio` from `detalle_pedido` dp1_0 left join `pedido` p1_0 on p1_0.`id`=dp1_0.`pedido_id` left join `user` u1_0 on u1_0.`id`=p1_0.`user_id` left join `producto` p2_0 on p2_0.`id`=dp1_0.`producto_id` where dp1_0.`producto_id`=?
2024-05-10 16:59:49.221 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select dp1_0.`id_detalle_pedido`,dp1_0.`cantidad_detalle_pedido`,p1_0.`id`,p1_0.`estado`,p1_0.`fecha_fin`,p1_0.`fecha_inicio`,p1_0.`total_pedido`,u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,dp1_0.`precio_detalle_pedido`,p2_0.`id`,p2_0.`descripcion`,p2_0.`image`,p2_0.`ingredientes`,p2_0.`nombre`,p2_0.`nombre_categoria`,p2_0.`precio` from `detalle_pedido` dp1_0 left join `pedido` p1_0 on p1_0.`id`=dp1_0.`pedido_id` left join `user` u1_0 on u1_0.`id`=p1_0.`user_id` left join `producto` p2_0 on p2_0.`id`=dp1_0.`producto_id` where dp1_0.`producto_id`=?
2024-05-10 16:59:49.223 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select dp1_0.`id_detalle_pedido`,dp1_0.`cantidad_detalle_pedido`,p1_0.`id`,p1_0.`estado`,p1_0.`fecha_fin`,p1_0.`fecha_inicio`,p1_0.`total_pedido`,u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,dp1_0.`precio_detalle_pedido`,p2_0.`id`,p2_0.`descripcion`,p2_0.`image`,p2_0.`ingredientes`,p2_0.`nombre`,p2_0.`nombre_categoria`,p2_0.`precio` from `detalle_pedido` dp1_0 left join `pedido` p1_0 on p1_0.`id`=dp1_0.`pedido_id` left join `user` u1_0 on u1_0.`id`=p1_0.`user_id` left join `producto` p2_0 on p2_0.`id`=dp1_0.`producto_id` where dp1_0.`producto_id`=?
2024-05-10 16:59:53.394 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 16:59:53.395 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 16:59:53.396 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 16:59:53.399 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 16:59:54.923 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 16:59:54.925 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - select dp1_0.`id_detalle_pedido`,dp1_0.`cantidad_detalle_pedido`,p1_0.`id`,p1_0.`estado`,p1_0.`fecha_fin`,p1_0.`fecha_inicio`,p1_0.`total_pedido`,u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,dp1_0.`precio_detalle_pedido`,p2_0.`id`,p2_0.`descripcion`,p2_0.`image`,p2_0.`ingredientes`,p2_0.`nombre`,p2_0.`nombre_categoria`,p2_0.`precio` from `detalle_pedido` dp1_0 left join `pedido` p1_0 on p1_0.`id`=dp1_0.`pedido_id` left join `user` u1_0 on u1_0.`id`=p1_0.`user_id` left join `producto` p2_0 on p2_0.`id`=dp1_0.`producto_id` where dp1_0.`producto_id`=?
2024-05-10 16:59:54.926 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - select dp1_0.`id_detalle_pedido`,dp1_0.`cantidad_detalle_pedido`,p1_0.`id`,p1_0.`estado`,p1_0.`fecha_fin`,p1_0.`fecha_inicio`,p1_0.`total_pedido`,u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,dp1_0.`precio_detalle_pedido`,p2_0.`id`,p2_0.`descripcion`,p2_0.`image`,p2_0.`ingredientes`,p2_0.`nombre`,p2_0.`nombre_categoria`,p2_0.`precio` from `detalle_pedido` dp1_0 left join `pedido` p1_0 on p1_0.`id`=dp1_0.`pedido_id` left join `user` u1_0 on u1_0.`id`=p1_0.`user_id` left join `producto` p2_0 on p2_0.`id`=dp1_0.`producto_id` where dp1_0.`producto_id`=?
2024-05-10 16:59:54.929 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - select dp1_0.`id_detalle_pedido`,dp1_0.`cantidad_detalle_pedido`,p1_0.`id`,p1_0.`estado`,p1_0.`fecha_fin`,p1_0.`fecha_inicio`,p1_0.`total_pedido`,u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,dp1_0.`precio_detalle_pedido`,p2_0.`id`,p2_0.`descripcion`,p2_0.`image`,p2_0.`ingredientes`,p2_0.`nombre`,p2_0.`nombre_categoria`,p2_0.`precio` from `detalle_pedido` dp1_0 left join `pedido` p1_0 on p1_0.`id`=dp1_0.`pedido_id` left join `user` u1_0 on u1_0.`id`=p1_0.`user_id` left join `producto` p2_0 on p2_0.`id`=dp1_0.`producto_id` where dp1_0.`producto_id`=?
2024-05-10 16:59:54.931 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - select dp1_0.`id_detalle_pedido`,dp1_0.`cantidad_detalle_pedido`,p1_0.`id`,p1_0.`estado`,p1_0.`fecha_fin`,p1_0.`fecha_inicio`,p1_0.`total_pedido`,u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,dp1_0.`precio_detalle_pedido`,p2_0.`id`,p2_0.`descripcion`,p2_0.`image`,p2_0.`ingredientes`,p2_0.`nombre`,p2_0.`nombre_categoria`,p2_0.`precio` from `detalle_pedido` dp1_0 left join `pedido` p1_0 on p1_0.`id`=dp1_0.`pedido_id` left join `user` u1_0 on u1_0.`id`=p1_0.`user_id` left join `producto` p2_0 on p2_0.`id`=dp1_0.`producto_id` where dp1_0.`producto_id`=?
2024-05-10 17:06:37.400 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-05-10 17:06:37.417 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 17:06:37.425 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 17:06:37.430 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 17:06:37.620 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 1272 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 17:06:37.621 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 17:06:38.498 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 17:06:38.538 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 39 ms. Found 5 JPA repository interfaces.
2024-05-10 17:06:38.868 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 17:06:38.870 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 17:06:38.871 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 17:06:38.903 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 17:06:38.903 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 1275 ms
2024-05-10 17:06:38.997 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 17:06:39.070 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 17:06:39.077 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 17:06:39.087 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 17:06:39.090 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Starting...
2024-05-10 17:06:39.100 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-2 - Added connection org.mariadb.jdbc.Connection@7b180cc3
2024-05-10 17:06:39.102 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Start completed.
2024-05-10 17:06:39.403 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 17:06:39.444 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 17:06:40.129 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext.refresh - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'gestorRestauranteController': Unsatisfied dependency expressed through field 'pedidoService': No qualifying bean of type 'tfc.gestorRestaurante.models.services.Pedido.IPedidoService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
2024-05-10 17:06:40.131 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 17:06:40.132 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown initiated...
2024-05-10 17:06:40.135 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown completed.
2024-05-10 17:06:40.136 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Stopping service [Tomcat]
2024-05-10 17:06:40.142 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger.logMessage - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-10 17:06:40.183 [restartedMain] ERROR o.s.b.d.LoggingFailureAnalysisReporter.report - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Field pedidoService in tfc.gestorRestaurante.controllers.GestorRestauranteController required a bean of type 'tfc.gestorRestaurante.models.services.Pedido.IPedidoService' that could not be found.

The injection point has the following annotations:
	- @org.springframework.beans.factory.annotation.Autowired(required=true)


Action:

Consider defining a bean of type 'tfc.gestorRestaurante.models.services.Pedido.IPedidoService' in your configuration.

2024-05-10 17:06:41.761 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 1272 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 17:06:41.761 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 17:06:42.259 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 17:06:42.289 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 30 ms. Found 5 JPA repository interfaces.
2024-05-10 17:06:42.516 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 17:06:42.519 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 17:06:42.520 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 17:06:42.545 [restartedMain] INFO  o.a.c.c.C.[Tomcat-1].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 17:06:42.546 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 780 ms
2024-05-10 17:06:42.622 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 17:06:42.668 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 17:06:42.672 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 17:06:42.677 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 17:06:42.678 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-3 - Starting...
2024-05-10 17:06:42.684 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-3 - Added connection org.mariadb.jdbc.Connection@31d23d22
2024-05-10 17:06:42.684 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-3 - Start completed.
2024-05-10 17:06:42.836 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 17:06:42.860 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 17:06:43.442 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@78bfc79a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@361c77e9, org.springframework.security.web.context.SecurityContextHolderFilter@6b2de36c, org.springframework.security.web.header.HeaderWriterFilter@7b3ebe0d, org.springframework.security.web.authentication.logout.LogoutFilter@29fce236, tfc.gestorRestaurante.security.JwtAuthenticationFilter@73a1a5af, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@49a1538f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@47e15260, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4b6ef70e, org.springframework.security.web.session.SessionManagementFilter@cecc521, org.springframework.security.web.access.ExceptionTranslationFilter@33f22b85, org.springframework.security.web.access.intercept.AuthorizationFilter@273dccdf]
2024-05-10 17:06:43.733 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 17:06:43.753 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 17:06:43.757 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 2.104 seconds (process running for 696.538)
2024-05-10 17:06:43.762 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener.onApplicationEvent - Condition evaluation unchanged
2024-05-10 17:07:05.245 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat-1].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 17:07:05.246 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 17:07:05.250 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 4 ms
2024-05-10 17:07:05.272 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 17:07:05.274 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 17:07:05.276 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 17:07:05.281 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 17:07:05.287 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 17:10:08.555 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 17:10:08.557 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 17:10:08.560 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 17:10:08.565 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 17:10:08.567 [http-nio-8080-exec-5] WARN  o.m.jdbc.message.server.ErrorPacket.warn - Error: 1062-23000: Duplicate entry '1' for key 'UK_28n7df5kbg6dbw07s3igy5465'
2024-05-10 17:10:08.570 [http-nio-8080-exec-5] WARN  o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - SQL Error: 1062, SQLState: 23000
2024-05-10 17:10:08.570 [http-nio-8080-exec-5] ERROR o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - (conn=117) Duplicate entry '1' for key 'UK_28n7df5kbg6dbw07s3igy5465'
2024-05-10 17:10:08.586 [http-nio-8080-exec-5] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290), org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241), org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550), org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61), org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335), org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220), jdk.proxy8/jdk.proxy8.$Proxy191.save(Unknown Source), tfc.gestorRestaurante.models.services.DetallePedido.DetallePedidoService.createDetallePedido(DetallePedidoService.java:48), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351), org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123), org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385), org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717), tfc.gestorRestaurante.models.services.DetallePedido.DetallePedidoService$$SpringCGLIB$$0.createDetallePedido(<generated>), tfc.gestorRestaurante.models.services.Pedido.PedidoService.createPedido(PedidoService.java:66), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351), org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123), org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385), org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717), tfc.gestorRestaurante.models.services.Pedido.PedidoService$$SpringCGLIB$$0.createPedido(<generated>), tfc.gestorRestaurante.controllers.GestorRestauranteController.createPedido(GestorRestauranteController.java:66), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 17:10:08.600 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='could not execute statement [(conn=117) Duplicate entry '1' for key 'UK_28n7df5kbg6dbw07s3igy5465'] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [UK_28n7df5kbg6dbw07s3igy5465]', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 17:10:08.618 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [(conn=117) Duplicate entry '1' for key 'UK_28n7df5kbg6dbw07s3igy5465'] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [UK_28n7df5kbg6dbw07s3igy5465]]
2024-05-10 17:35:31.294 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 2 class path changes (0 additions, 2 deletions, 0 modifications)
2024-05-10 17:35:31.304 [Thread-7] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 17:35:31.305 [Thread-7] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-3 - Shutdown initiated...
2024-05-10 17:35:31.311 [Thread-7] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-3 - Shutdown completed.
2024-05-10 17:35:31.448 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 1272 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 17:35:31.449 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 17:35:32.006 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 17:35:32.021 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext.refresh - Exception encountered during context initialization - cancelling refresh attempt: java.lang.TypeNotPresentException: Type tfc.gestorRestaurante.models.entity.DetallePedido not present
2024-05-10 17:35:32.025 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger.logMessage - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-10 17:35:32.029 [restartedMain] ERROR o.s.boot.SpringApplication.reportFailure - Application run failed
java.lang.TypeNotPresentException: Type tfc.gestorRestaurante.models.entity.DetallePedido not present
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.repository.ClassRepository.computeSuperInterfaces(ClassRepository.java:117)
	at java.base/sun.reflect.generics.repository.ClassRepository.getSuperInterfaces(ClassRepository.java:95)
	at java.base/java.lang.Class.getGenericInterfaces(Class.java:1296)
	at org.springframework.core.ResolvableType.getInterfaces(ResolvableType.java:517)
	at org.springframework.core.ResolvableType.as(ResolvableType.java:465)
	at org.springframework.data.util.TypeDiscoverer.getSuperTypeInformation(TypeDiscoverer.java:254)
	at org.springframework.data.util.ClassTypeInformation.getSuperTypeInformation(ClassTypeInformation.java:36)
	at org.springframework.data.util.TypeInformation.getRequiredSuperTypeInformation(TypeInformation.java:327)
	at org.springframework.data.repository.core.support.DefaultRepositoryMetadata.<init>(DefaultRepositoryMetadata.java:55)
	at org.springframework.data.repository.core.support.AbstractRepositoryMetadata.getMetadata(AbstractRepositoryMetadata.java:77)
	at org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport.getRepositoryConfigurations(RepositoryConfigurationExtensionSupport.java:91)
	at org.springframework.data.repository.config.RepositoryConfigurationDelegate.registerRepositoriesIn(RepositoryConfigurationDelegate.java:164)
	at org.springframework.boot.autoconfigure.data.AbstractRepositoryConfigurationSourceSupport.registerBeanDefinitions(AbstractRepositoryConfigurationSourceSupport.java:62)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.lambda$loadBeanDefinitionsFromRegistrars$1(ConfigurationClassBeanDefinitionReader.java:376)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:986)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromRegistrars(ConfigurationClassBeanDefinitionReader.java:375)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:148)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:120)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:428)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:289)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:349)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:118)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:788)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:606)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at tfc.gestorRestaurante.GestorRestauranteApplication.main(GestorRestauranteApplication.java:21)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.ClassNotFoundException: tfc.gestorRestaurante.models.entity.DetallePedido
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:534)
	at java.base/java.lang.Class.forName(Class.java:513)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:534)
	at java.base/java.lang.Class.forName(Class.java:513)
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)
	... 39 common frames omitted
2024-05-10 17:35:34.560 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 1272 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 17:35:34.560 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 17:35:34.984 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 17:35:35.022 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 38 ms. Found 5 JPA repository interfaces.
2024-05-10 17:35:35.271 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 17:35:35.273 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 17:35:35.273 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 17:35:35.298 [restartedMain] INFO  o.a.c.c.C.[Tomcat-1].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 17:35:35.298 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 735 ms
2024-05-10 17:35:35.372 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 17:35:35.426 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 17:35:35.431 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 17:35:35.438 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 17:35:35.440 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-4 - Starting...
2024-05-10 17:35:35.446 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-4 - Added connection org.mariadb.jdbc.Connection@a86b4f1
2024-05-10 17:35:35.446 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-4 - Start completed.
2024-05-10 17:35:35.604 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 17:35:35.625 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 17:35:36.248 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@11c070ec, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@30de88cd, org.springframework.security.web.context.SecurityContextHolderFilter@4c7504c0, org.springframework.security.web.header.HeaderWriterFilter@1abb83b5, org.springframework.security.web.authentication.logout.LogoutFilter@2c91b5cc, tfc.gestorRestaurante.security.JwtAuthenticationFilter@3b7fa483, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1ed2ceca, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@58b2408e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@787b3916, org.springframework.security.web.session.SessionManagementFilter@3d25a420, org.springframework.security.web.access.ExceptionTranslationFilter@77c4b622, org.springframework.security.web.access.intercept.AuthorizationFilter@6e411823]
2024-05-10 17:35:36.559 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 17:35:36.577 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 17:35:36.581 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 2.056 seconds (process running for 2429.362)
2024-05-10 17:35:36.583 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener.onApplicationEvent - Condition evaluation unchanged
2024-05-10 17:45:43.522 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 17:45:43.524 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-4 - Shutdown initiated...
2024-05-10 17:45:43.528 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-4 - Shutdown completed.
2024-05-10 17:45:48.170 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 10840 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 17:45:48.173 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 17:45:48.236 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 17:45:48.237 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 17:45:49.393 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 17:45:49.493 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 90 ms. Found 5 JPA repository interfaces.
2024-05-10 17:45:50.287 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 17:45:50.300 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 17:45:50.300 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 17:45:50.367 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 17:45:50.367 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 2129 ms
2024-05-10 17:45:50.534 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 17:45:50.680 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 17:45:50.758 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 17:45:50.799 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 17:45:51.091 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 17:45:51.130 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 17:45:51.278 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@569b83b5
2024-05-10 17:45:51.281 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 17:45:52.415 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 17:45:52.470 [restartedMain] DEBUG org.hibernate.SQL.logStatement - create table `detalle_pedido` (`id_detalle_pedido` bigint not null auto_increment, `cantidad_detalle_pedido` integer not null, `precio_detalle_pedido` float(53) not null, `pedido_id` bigint, `producto_id` bigint, primary key (`id_detalle_pedido`)) engine=InnoDB
2024-05-10 17:45:52.477 [restartedMain] DEBUG org.hibernate.SQL.logStatement - create table `pedido` (`id` bigint not null auto_increment, `estado` varchar(255) not null, `fecha_fin` datetime(6), `fecha_inicio` datetime(6), `total_pedido` float(53) not null, `user_id` bigint, primary key (`id`)) engine=InnoDB
2024-05-10 17:45:52.484 [restartedMain] DEBUG org.hibernate.SQL.logStatement - create table `producto` (`id` bigint not null auto_increment, `descripcion` varchar(255), `image` mediumtext, `ingredientes` varchar(255), `nombre` varchar(50) not null, `nombre_categoria` varchar(255), `precio` float(53) not null, primary key (`id`)) engine=InnoDB
2024-05-10 17:45:52.491 [restartedMain] DEBUG org.hibernate.SQL.logStatement - create table `rol` (`id` bigint not null auto_increment, `name` varchar(255), primary key (`id`)) engine=InnoDB
2024-05-10 17:45:52.498 [restartedMain] DEBUG org.hibernate.SQL.logStatement - create table `user` (`id` bigint not null auto_increment, `city` varchar(255), `creation_date` datetime(6), `email` varchar(255) not null, `last_login` datetime(6), `name` varchar(255), `nif` varchar(255), `password` varchar(255) not null, `postal_code` varchar(255), `username` varchar(255) not null, primary key (`id`)) engine=InnoDB
2024-05-10 17:45:52.505 [restartedMain] DEBUG org.hibernate.SQL.logStatement - create table `user_role` (`user_id` bigint not null, `role_id` bigint not null) engine=InnoDB
2024-05-10 17:45:52.511 [restartedMain] DEBUG org.hibernate.SQL.logStatement - alter table if exists `user` drop index if exists UK_ob8kqyqqgmefl0aco34akdtpe
2024-05-10 17:45:52.516 [restartedMain] DEBUG org.hibernate.SQL.logStatement - alter table if exists `user` add constraint UK_ob8kqyqqgmefl0aco34akdtpe unique (`email`)
2024-05-10 17:45:52.527 [restartedMain] DEBUG org.hibernate.SQL.logStatement - alter table if exists `user` drop index if exists UK_sb8bbouer5wak8vyiiy4pf2bx
2024-05-10 17:45:52.529 [restartedMain] DEBUG org.hibernate.SQL.logStatement - alter table if exists `user` add constraint UK_sb8bbouer5wak8vyiiy4pf2bx unique (`username`)
2024-05-10 17:45:52.540 [restartedMain] DEBUG org.hibernate.SQL.logStatement - alter table if exists `detalle_pedido` add constraint `FKcyy990j2efdhlrilye32brfea` foreign key (`pedido_id`) references `pedido` (`id`)
2024-05-10 17:45:52.555 [restartedMain] DEBUG org.hibernate.SQL.logStatement - alter table if exists `detalle_pedido` add constraint `FKhlylx73se3tj4aipl8mm6btig` foreign key (`producto_id`) references `producto` (`id`)
2024-05-10 17:45:52.571 [restartedMain] DEBUG org.hibernate.SQL.logStatement - alter table if exists `pedido` add constraint `FK8dtvnwp088ypglec6yqxa70xy` foreign key (`user_id`) references `user` (`id`)
2024-05-10 17:45:52.605 [restartedMain] DEBUG org.hibernate.SQL.logStatement - alter table if exists `user_role` add constraint `FKgbw7ugvky0pvoabsso7wrpif3` foreign key (`role_id`) references `rol` (`id`)
2024-05-10 17:45:52.621 [restartedMain] DEBUG org.hibernate.SQL.logStatement - alter table if exists `user_role` add constraint `FKhjx9nk20h4mo745tdqj8t8n9d` foreign key (`user_id`) references `user` (`id`)
2024-05-10 17:45:52.644 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 17:45:53.189 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 17:45:54.351 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5e32148e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5790d96b, org.springframework.security.web.context.SecurityContextHolderFilter@6a6c4c0d, org.springframework.security.web.header.HeaderWriterFilter@bc18002, org.springframework.security.web.authentication.logout.LogoutFilter@6686122e, tfc.gestorRestaurante.security.JwtAuthenticationFilter@78a822ed, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@35798798, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@66abc821, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@73b59dfd, org.springframework.security.web.session.SessionManagementFilter@7daecd76, org.springframework.security.web.access.ExceptionTranslationFilter@11e5ecbe, org.springframework.security.web.access.intercept.AuthorizationFilter@5c18d5e]
2024-05-10 17:45:54.836 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 17:45:54.883 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 17:45:54.894 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 7.381 seconds (process running for 8.278)
2024-05-10 17:48:37.587 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 17:48:37.593 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 17:48:37.599 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 17:48:40.396 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 1548 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 17:48:40.400 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 17:48:40.447 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 17:48:40.448 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 17:48:41.584 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 17:48:41.672 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 78 ms. Found 5 JPA repository interfaces.
2024-05-10 17:48:42.506 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 17:48:42.521 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 17:48:42.521 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 17:48:42.596 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 17:48:42.596 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 2148 ms
2024-05-10 17:48:42.758 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 17:48:42.871 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 17:48:42.921 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 17:48:42.954 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 17:48:43.285 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 17:48:43.333 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 17:48:43.495 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@69e0bd5d
2024-05-10 17:48:43.499 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 17:48:45.239 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 17:48:45.326 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 17:48:46.143 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 17:48:47.455 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@c0aa4e3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1affbc68, org.springframework.security.web.context.SecurityContextHolderFilter@21c737a, org.springframework.security.web.header.HeaderWriterFilter@381bbe23, org.springframework.security.web.authentication.logout.LogoutFilter@39b93a3a, tfc.gestorRestaurante.security.JwtAuthenticationFilter@38a9abeb, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@59d57bb2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@317fb415, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@358c2b21, org.springframework.security.web.session.SessionManagementFilter@1471961c, org.springframework.security.web.access.ExceptionTranslationFilter@1c89c1b6, org.springframework.security.web.access.intercept.AuthorizationFilter@15306a60]
2024-05-10 17:48:48.270 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 17:48:48.323 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 17:48:48.332 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 8.558 seconds (process running for 9.873)
2024-05-10 17:49:16.803 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 17:49:16.804 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 17:49:16.805 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 1 ms
2024-05-10 17:49:17.088 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`username`=?
2024-05-10 17:49:17.112 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user_role` r1_0 join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where r1_0.`user_id`=?
2024-05-10 17:49:17.118 [http-nio-8080-exec-1] WARN  o.s.s.c.bcrypt.BCryptPasswordEncoder.matches - Encoded password does not look like BCrypt
2024-05-10 17:49:17.120 [http-nio-8080-exec-1] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.security.authentication.dao.DaoAuthenticationProvider.additionalAuthenticationChecks(DaoAuthenticationProvider.java:89), org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:147), org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182), tfc.gestorRestaurante.models.services.Authentication.AuthenticationService.authenticate(AuthenticationService.java:42), tfc.gestorRestaurante.controllers.AuthenticationController.authenticate(AuthenticationController.java:53), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 17:49:17.130 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <404 NOT_FOUND Not Found,ProblemDetail[type='about:blank', title='Unauthorized', status=401, detail='Bad credentials', instance='/auth/login', properties='{description=The username or password is incorrect}'],[]>, but its status doesn't match the ProblemDetail status: 401
2024-05-10 17:49:17.166 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.security.authentication.BadCredentialsException: Bad credentials]
2024-05-10 17:49:46.188 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`username`=?
2024-05-10 17:49:46.189 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user_role` r1_0 join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where r1_0.`user_id`=?
2024-05-10 17:49:46.191 [http-nio-8080-exec-2] WARN  o.s.s.c.bcrypt.BCryptPasswordEncoder.matches - Encoded password does not look like BCrypt
2024-05-10 17:49:46.191 [http-nio-8080-exec-2] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.security.authentication.dao.DaoAuthenticationProvider.additionalAuthenticationChecks(DaoAuthenticationProvider.java:89), org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:147), org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182), tfc.gestorRestaurante.models.services.Authentication.AuthenticationService.authenticate(AuthenticationService.java:42), tfc.gestorRestaurante.controllers.AuthenticationController.authenticate(AuthenticationController.java:53), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 17:49:46.192 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <404 NOT_FOUND Not Found,ProblemDetail[type='about:blank', title='Unauthorized', status=401, detail='Bad credentials', instance='/auth/login', properties='{description=The username or password is incorrect}'],[]>, but its status doesn't match the ProblemDetail status: 401
2024-05-10 17:49:46.194 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.security.authentication.BadCredentialsException: Bad credentials]
2024-05-10 17:50:16.159 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - select r1_0.`id`,r1_0.`name` from `rol` r1_0 where r1_0.`id` in (?)
2024-05-10 17:50:16.246 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - insert into `user` (`city`,`creation_date`,`email`,`last_login`,`name`,`nif`,`password`,`postal_code`,`username`) values (?,?,?,?,?,?,?,?,?)
2024-05-10 17:50:16.264 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - insert into `user_role` (`user_id`,`role_id`) values (?,?)
2024-05-10 17:50:39.144 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`username`=?
2024-05-10 17:50:39.146 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user_role` r1_0 join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where r1_0.`user_id`=?
2024-05-10 17:50:39.230 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`email`=?
2024-05-10 17:50:39.316 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id` from `user` u1_0 where u1_0.`email`=?
2024-05-10 17:50:39.378 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - SELECT ur.role_id FROM user u          INNER JOIN user_role ur ON u.id = ur.user_id WHERE u.id = ?
2024-05-10 17:50:40.860 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 17:50:46.801 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL.logStatement - insert into `producto` (`descripcion`,`image`,`ingredientes`,`nombre`,`nombre_categoria`,`precio`) values (?,?,?,?,?,?)
2024-05-10 17:50:46.947 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 17:50:48.855 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL.logStatement - insert into `producto` (`descripcion`,`image`,`ingredientes`,`nombre`,`nombre_categoria`,`precio`) values (?,?,?,?,?,?)
2024-05-10 17:50:48.906 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 17:51:05.324 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0 where p1_0.`id`=?
2024-05-10 17:51:22.907 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0 where p1_0.`id`=?
2024-05-10 17:51:22.921 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - update `producto` set `descripcion`=?,`image`=?,`ingredientes`=?,`nombre`=?,`nombre_categoria`=?,`precio`=? where `id`=?
2024-05-10 17:51:23.101 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 17:51:28.115 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0 where p1_0.`id`=?
2024-05-10 17:51:43.306 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0 where p1_0.`id`=?
2024-05-10 17:51:43.309 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - update `producto` set `descripcion`=?,`image`=?,`ingredientes`=?,`nombre`=?,`nombre_categoria`=?,`precio`=? where `id`=?
2024-05-10 17:51:43.385 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 17:51:49.797 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 17:51:58.315 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`username`=?
2024-05-10 17:51:58.316 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - select r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user_role` r1_0 join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where r1_0.`user_id`=?
2024-05-10 17:51:58.390 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`email`=?
2024-05-10 17:51:58.462 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id` from `user` u1_0 where u1_0.`email`=?
2024-05-10 17:51:58.564 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - SELECT ur.role_id FROM user u          INNER JOIN user_role ur ON u.id = ur.user_id WHERE u.id = ?
2024-05-10 17:51:59.698 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 17:52:17.383 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 17:52:17.385 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 17:52:17.387 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 17:52:17.390 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 17:52:17.395 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 17:55:06.545 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`username`=?
2024-05-10 17:55:06.547 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - select r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user_role` r1_0 join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where r1_0.`user_id`=?
2024-05-10 17:55:06.617 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`email`=?
2024-05-10 17:55:06.670 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id` from `user` u1_0 where u1_0.`email`=?
2024-05-10 17:55:06.689 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL.logStatement - SELECT ur.role_id FROM user u          INNER JOIN user_role ur ON u.id = ur.user_id WHERE u.id = ?
2024-05-10 17:55:10.468 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 17:55:23.235 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 17:55:23.239 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 17:55:23.241 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 17:55:23.249 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 17:55:23.251 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 18:03:33.595 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 3 class path changes (0 additions, 3 deletions, 0 modifications)
2024-05-10 18:03:33.624 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:03:33.633 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 18:03:33.642 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 18:03:34.024 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 1548 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 18:03:34.025 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 18:03:35.295 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 18:03:35.357 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 60 ms. Found 5 JPA repository interfaces.
2024-05-10 18:03:35.816 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 18:03:35.819 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 18:03:35.819 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 18:03:35.858 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 18:03:35.858 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 1827 ms
2024-05-10 18:03:35.986 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 18:03:36.090 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 18:03:36.097 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 18:03:36.121 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 18:03:36.124 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Starting...
2024-05-10 18:03:36.145 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-2 - Added connection org.mariadb.jdbc.Connection@5d7b0c4f
2024-05-10 18:03:36.146 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Start completed.
2024-05-10 18:03:36.557 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 18:03:36.653 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:03:37.628 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext.refresh - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'gestorRestauranteController': Lookup method resolution failed
2024-05-10 18:03:37.629 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:03:37.631 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown initiated...
2024-05-10 18:03:37.635 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown completed.
2024-05-10 18:03:37.636 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Stopping service [Tomcat]
2024-05-10 18:03:37.649 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger.logMessage - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-10 18:03:37.701 [restartedMain] ERROR o.s.boot.SpringApplication.reportFailure - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'gestorRestauranteController': Lookup method resolution failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.checkLookupMethods(AutowiredAnnotationBeanPostProcessor.java:497)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:367)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:1294)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at tfc.gestorRestaurante.GestorRestauranteApplication.main(GestorRestauranteApplication.java:21)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.IllegalStateException: Failed to introspect Class [tfc.gestorRestaurante.controllers.GestorRestauranteController] from ClassLoader [org.springframework.boot.devtools.restart.classloader.RestartClassLoader@321cb638]
	at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:483)
	at org.springframework.util.ReflectionUtils.doWithLocalMethods(ReflectionUtils.java:320)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.checkLookupMethods(AutowiredAnnotationBeanPostProcessor.java:475)
	... 22 common frames omitted
Caused by: java.lang.NoClassDefFoundError: tfc/gestorRestaurante/dto/DetallePedido/DetallePedidoDTO
	at java.base/java.lang.Class.getDeclaredMethods0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredMethods(Class.java:3578)
	at java.base/java.lang.Class.getDeclaredMethods(Class.java:2676)
	at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:465)
	... 24 common frames omitted
Caused by: java.lang.ClassNotFoundException: tfc.gestorRestaurante.dto.DetallePedido.DetallePedidoDTO
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:534)
	at java.base/java.lang.Class.forName(Class.java:513)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	... 28 common frames omitted
2024-05-10 18:03:41.304 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 1548 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 18:03:41.305 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 18:03:42.012 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 18:03:42.068 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 55 ms. Found 5 JPA repository interfaces.
2024-05-10 18:03:42.417 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 18:03:42.425 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 18:03:42.426 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 18:03:42.458 [restartedMain] INFO  o.a.c.c.C.[Tomcat-1].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 18:03:42.459 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 1151 ms
2024-05-10 18:03:42.592 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 18:03:42.672 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 18:03:42.678 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 18:03:42.690 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 18:03:42.694 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-3 - Starting...
2024-05-10 18:03:42.700 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-3 - Added connection org.mariadb.jdbc.Connection@7efdb5c2
2024-05-10 18:03:42.701 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-3 - Start completed.
2024-05-10 18:03:42.955 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 18:03:43.001 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:03:43.655 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext.refresh - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'gestorRestauranteController' defined in file [C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes\tfc\gestorRestaurante\controllers\GestorRestauranteController.class]: Post-processing of merged bean definition failed
2024-05-10 18:03:43.656 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:03:43.657 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-3 - Shutdown initiated...
2024-05-10 18:03:43.662 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-3 - Shutdown completed.
2024-05-10 18:03:43.664 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Stopping service [Tomcat]
2024-05-10 18:03:43.671 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger.logMessage - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-10 18:03:43.676 [restartedMain] ERROR o.s.boot.SpringApplication.reportFailure - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'gestorRestauranteController' defined in file [C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes\tfc\gestorRestaurante\controllers\GestorRestauranteController.class]: Post-processing of merged bean definition failed
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:577)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at tfc.gestorRestaurante.GestorRestauranteApplication.main(GestorRestauranteApplication.java:21)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.IllegalStateException: Failed to introspect Class [tfc.gestorRestaurante.controllers.GestorRestauranteController] from ClassLoader [org.springframework.boot.devtools.restart.classloader.RestartClassLoader@1602ab6]
	at org.springframework.util.ReflectionUtils.getDeclaredFields(ReflectionUtils.java:757)
	at org.springframework.util.ReflectionUtils.doWithLocalFields(ReflectionUtils.java:689)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.buildPersistenceMetadata(PersistenceAnnotationBeanPostProcessor.java:436)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findPersistenceMetadata(PersistenceAnnotationBeanPostProcessor.java:417)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findInjectionMetadata(PersistenceAnnotationBeanPostProcessor.java:376)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessMergedBeanDefinition(PersistenceAnnotationBeanPostProcessor.java:353)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyMergedBeanDefinitionPostProcessors(AbstractAutowireCapableBeanFactory.java:1085)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:574)
	... 18 common frames omitted
Caused by: java.lang.NoClassDefFoundError: tfc/gestorRestaurante/mappers/Pedido/PedidoMapper
	at java.base/java.lang.Class.getDeclaredFields0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredFields(Class.java:3473)
	at java.base/java.lang.Class.getDeclaredFields(Class.java:2542)
	at org.springframework.util.ReflectionUtils.getDeclaredFields(ReflectionUtils.java:752)
	... 25 common frames omitted
Caused by: java.lang.ClassNotFoundException: tfc.gestorRestaurante.mappers.Pedido.PedidoMapper
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:534)
	at java.base/java.lang.Class.forName(Class.java:513)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	... 29 common frames omitted
2024-05-10 18:06:32.694 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 15960 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 18:06:32.698 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 18:06:32.811 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 18:06:32.812 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 18:06:34.530 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 18:06:34.662 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 118 ms. Found 5 JPA repository interfaces.
2024-05-10 18:06:35.512 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 18:06:35.524 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 18:06:35.524 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 18:06:35.585 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 18:06:35.586 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 2773 ms
2024-05-10 18:06:35.744 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 18:06:35.869 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 18:06:35.923 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 18:06:35.961 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 18:06:36.175 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 18:06:36.205 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 18:06:36.292 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@3f6ae55f
2024-05-10 18:06:36.294 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 18:06:37.530 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 18:06:37.614 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:06:38.222 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 18:06:39.495 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@530fbb32, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5a63a539, org.springframework.security.web.context.SecurityContextHolderFilter@27fe55ac, org.springframework.security.web.header.HeaderWriterFilter@7f89669, org.springframework.security.web.authentication.logout.LogoutFilter@4d52719c, tfc.gestorRestaurante.security.JwtAuthenticationFilter@6a6df5cd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4012a1db, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5f2d2931, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@58e72021, org.springframework.security.web.session.SessionManagementFilter@481b05c2, org.springframework.security.web.access.ExceptionTranslationFilter@48f34606, org.springframework.security.web.access.intercept.AuthorizationFilter@642da91b]
2024-05-10 18:06:40.040 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 18:06:40.095 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 18:06:40.105 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 8.288 seconds (process running for 9.332)
2024-05-10 18:06:48.320 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 18:06:48.320 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 18:06:48.324 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 4 ms
2024-05-10 18:06:48.617 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`username`=?
2024-05-10 18:06:48.642 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user_role` r1_0 join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where r1_0.`user_id`=?
2024-05-10 18:06:48.719 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`email`=?
2024-05-10 18:06:48.835 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id` from `user` u1_0 where u1_0.`email`=?
2024-05-10 18:06:48.948 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - SELECT ur.role_id FROM user u          INNER JOIN user_role ur ON u.id = ur.user_id WHERE u.id = ?
2024-05-10 18:07:02.239 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 18:07:12.138 [http-nio-8080-exec-5] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:371), org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:246), org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550), org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61), org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335), org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220), jdk.proxy4/jdk.proxy4.$Proxy156.findById(Unknown Source), tfc.gestorRestaurante.models.services.User.UserService.findById(UserService.java:56), tfc.gestorRestaurante.mappers.Pedido.PedidoMapper.fromDTO(PedidoMapper.java:36), tfc.gestorRestaurante.models.services.Pedido.PedidoService.createPedido(PedidoService.java:57), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351), org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123), org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385), org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717), tfc.gestorRestaurante.models.services.Pedido.PedidoService$$SpringCGLIB$$0.createPedido(<generated>), tfc.gestorRestaurante.controllers.GestorRestauranteController.createPedido(GestorRestauranteController.java:66), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 18:07:12.146 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='The given id must not be null', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 18:07:12.155 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.dao.InvalidDataAccessApiUsageException: The given id must not be null]
2024-05-10 18:11:52.850 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:11:52.854 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 18:11:52.859 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 18:11:59.059 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 11564 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 18:11:59.061 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 18:11:59.108 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 18:11:59.109 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 18:12:00.186 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 18:12:00.265 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 70 ms. Found 5 JPA repository interfaces.
2024-05-10 18:12:01.018 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 18:12:01.036 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 18:12:01.037 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 18:12:01.101 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 18:12:01.101 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 1991 ms
2024-05-10 18:12:01.287 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 18:12:01.427 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 18:12:01.507 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 18:12:01.547 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 18:12:01.782 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 18:12:01.812 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 18:12:01.911 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@740185d6
2024-05-10 18:12:01.914 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 18:12:03.165 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 18:12:03.245 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:12:03.742 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 18:12:04.934 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@502e0c95, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@298f00b2, org.springframework.security.web.context.SecurityContextHolderFilter@1a8aabc3, org.springframework.security.web.header.HeaderWriterFilter@5745e572, org.springframework.security.web.authentication.logout.LogoutFilter@5aac3dca, tfc.gestorRestaurante.security.JwtAuthenticationFilter@bc9c508, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@44c1402c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@222fb1f5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4e45e7da, org.springframework.security.web.session.SessionManagementFilter@2e073301, org.springframework.security.web.access.ExceptionTranslationFilter@c5ee95, org.springframework.security.web.access.intercept.AuthorizationFilter@202b2e6c]
2024-05-10 18:12:05.380 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 18:12:05.425 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 18:12:05.434 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 7.003 seconds (process running for 7.851)
2024-05-10 18:12:15.535 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 18:12:15.535 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 18:12:15.536 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 1 ms
2024-05-10 18:12:15.814 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`username`=?
2024-05-10 18:12:15.838 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user_role` r1_0 join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where r1_0.`user_id`=?
2024-05-10 18:12:15.927 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`email`=?
2024-05-10 18:12:16.100 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id` from `user` u1_0 where u1_0.`email`=?
2024-05-10 18:12:16.215 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - SELECT ur.role_id FROM user u          INNER JOIN user_role ur ON u.id = ur.user_id WHERE u.id = ?
2024-05-10 18:12:17.265 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 18:12:20.087 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 18:12:20.107 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 18:12:20.114 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 18:12:20.116 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 18:12:20.119 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 18:12:20.123 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 18:19:28.292 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:19:28.297 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 18:19:28.301 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 18:19:33.742 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 2716 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 18:19:33.747 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 18:19:33.836 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 18:19:33.836 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 18:19:36.493 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 18:19:36.615 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 109 ms. Found 5 JPA repository interfaces.
2024-05-10 18:19:37.686 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 18:19:37.699 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 18:19:37.699 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 18:19:37.769 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 18:19:37.770 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 3932 ms
2024-05-10 18:19:37.958 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 18:19:38.068 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 18:19:38.129 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 18:19:38.165 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 18:19:38.394 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 18:19:38.427 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 18:19:38.503 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@6981acd2
2024-05-10 18:19:38.505 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 18:19:39.752 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 18:19:39.840 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:19:40.428 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 18:19:41.576 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1d1d3014, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@526464ca, org.springframework.security.web.context.SecurityContextHolderFilter@21e83062, org.springframework.security.web.header.HeaderWriterFilter@3e186424, org.springframework.security.web.authentication.logout.LogoutFilter@3bd4fb72, tfc.gestorRestaurante.security.JwtAuthenticationFilter@7ac6dd40, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1b04e0d2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24ec6dbc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7cffc7b6, org.springframework.security.web.session.SessionManagementFilter@2896bfbe, org.springframework.security.web.access.ExceptionTranslationFilter@7ffadb51, org.springframework.security.web.access.intercept.AuthorizationFilter@3b3e811c]
2024-05-10 18:19:42.100 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 18:19:42.160 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 18:19:42.170 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 9.084 seconds (process running for 10.244)
2024-05-10 18:19:45.182 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 18:19:45.182 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 18:19:45.184 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 2 ms
2024-05-10 18:19:46.202 [http-nio-8080-exec-9] INFO  o.s.api.AbstractOpenApiResource.getOpenApi - Init duration for springdoc-openapi is: 603 ms
2024-05-10 18:21:44.294 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`username`=?
2024-05-10 18:21:44.315 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - select r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user_role` r1_0 join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where r1_0.`user_id`=?
2024-05-10 18:21:44.396 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`email`=?
2024-05-10 18:21:44.515 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id` from `user` u1_0 where u1_0.`email`=?
2024-05-10 18:21:44.561 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL.logStatement - SELECT ur.role_id FROM user u          INNER JOIN user_role ur ON u.id = ur.user_id WHERE u.id = ?
2024-05-10 18:21:47.321 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 18:21:59.685 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 18:21:59.723 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 18:21:59.734 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 18:21:59.736 [http-nio-8080-exec-9] WARN  o.m.jdbc.message.server.ErrorPacket.warn - Error: 1452-23000: Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 18:21:59.738 [http-nio-8080-exec-9] WARN  o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - SQL Error: 1452, SQLState: 23000
2024-05-10 18:21:59.739 [http-nio-8080-exec-9] ERROR o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - (conn=198) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 18:21:59.753 [http-nio-8080-exec-9] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290), org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241), org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550), org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61), org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335), org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220), jdk.proxy4/jdk.proxy4.$Proxy153.save(Unknown Source), tfc.gestorRestaurante.models.services.Pedido.PedidoService.createPedido(PedidoService.java:59), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351), org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123), org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385), org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717), tfc.gestorRestaurante.models.services.Pedido.PedidoService$$SpringCGLIB$$0.createPedido(<generated>), tfc.gestorRestaurante.controllers.GestorRestauranteController.createPedido(GestorRestauranteController.java:66), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 18:21:59.759 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='could not execute statement [(conn=198) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 18:21:59.765 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [(conn=198) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]]
2024-05-10 18:25:48.243 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:25:48.248 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 18:25:48.252 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 18:25:53.430 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 16728 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 18:25:53.433 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 18:25:53.479 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 18:25:53.479 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 18:25:54.716 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 18:25:54.787 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 64 ms. Found 5 JPA repository interfaces.
2024-05-10 18:25:55.705 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 18:25:55.721 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 18:25:55.722 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 18:25:55.784 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 18:25:55.784 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 2304 ms
2024-05-10 18:25:55.937 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 18:25:56.055 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 18:25:56.112 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 18:25:56.166 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 18:25:56.455 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 18:25:56.490 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 18:25:56.598 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@469c7b6
2024-05-10 18:25:56.599 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 18:25:57.874 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 18:25:57.956 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:25:58.541 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 18:25:59.821 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4d52719c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@25312c0a, org.springframework.security.web.context.SecurityContextHolderFilter@3c5e788c, org.springframework.security.web.header.HeaderWriterFilter@1988512b, org.springframework.security.web.authentication.logout.LogoutFilter@c7d24c5, tfc.gestorRestaurante.security.JwtAuthenticationFilter@36dedb6d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@32d40ada, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@51c9b8a8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4ffab5ac, org.springframework.security.web.session.SessionManagementFilter@3b7a3de3, org.springframework.security.web.access.ExceptionTranslationFilter@4c474e9, org.springframework.security.web.access.intercept.AuthorizationFilter@6a304763]
2024-05-10 18:26:00.309 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 18:26:00.356 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 18:26:00.368 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 7.548 seconds (process running for 8.486)
2024-05-10 18:26:02.800 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-05-10 18:26:02.820 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:26:02.825 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 18:26:02.832 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 18:26:03.035 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 16728 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 18:26:03.035 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 18:26:04.305 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 18:26:04.345 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 39 ms. Found 5 JPA repository interfaces.
2024-05-10 18:26:04.750 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 18:26:04.751 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 18:26:04.752 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 18:26:04.774 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 18:26:04.774 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 1728 ms
2024-05-10 18:26:04.854 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 18:26:04.908 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 18:26:04.913 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 18:26:04.921 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 18:26:04.924 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Starting...
2024-05-10 18:26:04.929 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-2 - Added connection org.mariadb.jdbc.Connection@1940f957
2024-05-10 18:26:04.930 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Start completed.
2024-05-10 18:26:05.251 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 18:26:05.317 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:26:06.195 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext.refresh - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'gestorRestauranteController': Unsatisfied dependency expressed through field 'pedidoService': No qualifying bean of type 'tfc.gestorRestaurante.models.services.Pedido.IPedidoService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
2024-05-10 18:26:06.196 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:26:06.199 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown initiated...
2024-05-10 18:26:06.201 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown completed.
2024-05-10 18:26:06.203 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Stopping service [Tomcat]
2024-05-10 18:26:06.211 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger.logMessage - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-10 18:26:06.264 [restartedMain] ERROR o.s.b.d.LoggingFailureAnalysisReporter.report - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Field pedidoService in tfc.gestorRestaurante.controllers.GestorRestauranteController required a bean of type 'tfc.gestorRestaurante.models.services.Pedido.IPedidoService' that could not be found.

The injection point has the following annotations:
	- @org.springframework.beans.factory.annotation.Autowired(required=true)


Action:

Consider defining a bean of type 'tfc.gestorRestaurante.models.services.Pedido.IPedidoService' in your configuration.

2024-05-10 18:26:07.762 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 16728 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 18:26:07.762 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 18:26:08.241 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 18:26:08.274 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 32 ms. Found 5 JPA repository interfaces.
2024-05-10 18:26:08.416 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 18:26:08.417 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 18:26:08.417 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 18:26:08.438 [restartedMain] INFO  o.a.c.c.C.[Tomcat-1].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 18:26:08.439 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 673 ms
2024-05-10 18:26:08.507 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 18:26:08.545 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 18:26:08.548 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 18:26:08.554 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 18:26:08.555 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-3 - Starting...
2024-05-10 18:26:08.558 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-3 - Added connection org.mariadb.jdbc.Connection@7f0d756f
2024-05-10 18:26:08.559 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-3 - Start completed.
2024-05-10 18:26:08.681 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 18:26:08.704 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:26:09.224 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@60628c61, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@16d5a231, org.springframework.security.web.context.SecurityContextHolderFilter@1a93dc24, org.springframework.security.web.header.HeaderWriterFilter@104e202a, org.springframework.security.web.authentication.logout.LogoutFilter@36180b2f, tfc.gestorRestaurante.security.JwtAuthenticationFilter@cc834bd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@b034beb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6a2d75d1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b1d071d, org.springframework.security.web.session.SessionManagementFilter@341d80ce, org.springframework.security.web.access.ExceptionTranslationFilter@7b2d5588, org.springframework.security.web.access.intercept.AuthorizationFilter@26d738d2]
2024-05-10 18:26:09.440 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 18:26:09.456 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 18:26:09.461 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 1.733 seconds (process running for 17.578)
2024-05-10 18:26:09.464 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener.onApplicationEvent - Condition evaluation unchanged
2024-05-10 18:26:12.285 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat-1].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 18:26:12.285 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 18:26:12.287 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 1 ms
2024-05-10 18:26:12.586 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`username`=?
2024-05-10 18:26:12.610 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user_role` r1_0 join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where r1_0.`user_id`=?
2024-05-10 18:26:12.683 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`email`=?
2024-05-10 18:26:12.808 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id` from `user` u1_0 where u1_0.`email`=?
2024-05-10 18:26:12.918 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - SELECT ur.role_id FROM user u          INNER JOIN user_role ur ON u.id = ur.user_id WHERE u.id = ?
2024-05-10 18:26:13.864 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 18:26:21.620 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 18:26:21.644 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 18:26:21.654 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 18:26:21.662 [http-nio-8080-exec-5] WARN  o.m.jdbc.message.server.ErrorPacket.warn - Error: 1452-23000: Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 18:26:21.663 [http-nio-8080-exec-5] WARN  o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - SQL Error: 1452, SQLState: 23000
2024-05-10 18:26:21.665 [http-nio-8080-exec-5] ERROR o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - (conn=228) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 18:26:21.677 [http-nio-8080-exec-5] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290), org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241), org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550), org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61), org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335), org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220), jdk.proxy8/jdk.proxy8.$Proxy186.save(Unknown Source), tfc.gestorRestaurante.models.services.Pedido.PedidoService.createPedido(PedidoService.java:57), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351), org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713), tfc.gestorRestaurante.models.services.Pedido.PedidoService$$SpringCGLIB$$0.createPedido(<generated>), tfc.gestorRestaurante.controllers.GestorRestauranteController.createPedido(GestorRestauranteController.java:66), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 18:26:21.687 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='could not execute statement [(conn=228) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 18:26:21.708 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [(conn=228) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]]
2024-05-10 18:28:42.638 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:28:42.638 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-3 - Shutdown initiated...
2024-05-10 18:28:42.641 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-3 - Shutdown completed.
2024-05-10 18:28:48.157 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 8828 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 18:28:48.159 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 18:28:48.204 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 18:28:48.204 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 18:28:49.542 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 18:28:49.621 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 71 ms. Found 5 JPA repository interfaces.
2024-05-10 18:28:50.502 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 18:28:50.525 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 18:28:50.525 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 18:28:50.594 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 18:28:50.594 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 2389 ms
2024-05-10 18:28:50.767 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 18:28:50.877 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 18:28:50.934 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 18:28:51.000 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 18:28:51.473 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 18:28:51.523 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 18:28:51.666 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@2a9f2f4e
2024-05-10 18:28:51.669 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 18:28:53.115 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 18:28:53.187 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:28:53.734 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 18:28:56.272 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2dccc5b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@a2547a, org.springframework.security.web.context.SecurityContextHolderFilter@113f458b, org.springframework.security.web.header.HeaderWriterFilter@2d066c68, org.springframework.security.web.authentication.logout.LogoutFilter@7173b34, tfc.gestorRestaurante.security.JwtAuthenticationFilter@222817b9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@70473fa8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@45291933, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@31d766b5, org.springframework.security.web.session.SessionManagementFilter@6630ae2a, org.springframework.security.web.access.ExceptionTranslationFilter@54af5918, org.springframework.security.web.access.intercept.AuthorizationFilter@665c941e]
2024-05-10 18:28:57.006 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 18:28:57.065 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 18:28:57.076 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 9.51 seconds (process running for 10.385)
2024-05-10 18:29:02.587 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 18:29:02.587 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 18:29:02.589 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 1 ms
2024-05-10 18:29:02.880 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`username`=?
2024-05-10 18:29:02.906 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user_role` r1_0 join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where r1_0.`user_id`=?
2024-05-10 18:29:02.983 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`email`=?
2024-05-10 18:29:03.098 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id` from `user` u1_0 where u1_0.`email`=?
2024-05-10 18:29:03.213 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - SELECT ur.role_id FROM user u          INNER JOIN user_role ur ON u.id = ur.user_id WHERE u.id = ?
2024-05-10 18:29:04.307 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 18:29:07.358 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 18:29:07.381 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 18:29:07.389 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 18:29:07.391 [http-nio-8080-exec-5] WARN  o.m.jdbc.message.server.ErrorPacket.warn - Error: 1452-23000: Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 18:29:07.393 [http-nio-8080-exec-5] WARN  o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - SQL Error: 1452, SQLState: 23000
2024-05-10 18:29:07.393 [http-nio-8080-exec-5] ERROR o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - (conn=238) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 18:29:07.408 [http-nio-8080-exec-5] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290), org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241), org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550), org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61), org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335), org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220), jdk.proxy4/jdk.proxy4.$Proxy151.save(Unknown Source), tfc.gestorRestaurante.models.services.Pedido.PedidoService.createPedido(PedidoService.java:57), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351), org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713), tfc.gestorRestaurante.models.services.Pedido.PedidoService$$SpringCGLIB$$0.createPedido(<generated>), tfc.gestorRestaurante.controllers.GestorRestauranteController.createPedido(GestorRestauranteController.java:66), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 18:29:07.416 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='could not execute statement [(conn=238) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 18:29:07.426 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [(conn=238) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]]
2024-05-10 18:32:02.409 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:32:02.414 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 18:32:02.418 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 18:32:07.591 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 11244 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 18:32:07.595 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 18:32:07.644 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 18:32:07.644 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 18:32:08.704 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 18:32:08.779 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 66 ms. Found 5 JPA repository interfaces.
2024-05-10 18:32:09.663 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 18:32:09.680 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 18:32:09.680 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 18:32:09.747 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 18:32:09.748 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 2104 ms
2024-05-10 18:32:09.898 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 18:32:10.009 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 18:32:10.063 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 18:32:10.106 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 18:32:10.355 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 18:32:10.380 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 18:32:10.465 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@523988f3
2024-05-10 18:32:10.467 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 18:32:11.781 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 18:32:11.876 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:32:12.541 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 18:32:14.044 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4115e8d9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@63aac3f5, org.springframework.security.web.context.SecurityContextHolderFilter@100fce56, org.springframework.security.web.header.HeaderWriterFilter@7b8052b8, org.springframework.security.web.authentication.logout.LogoutFilter@3afcd42a, tfc.gestorRestaurante.security.JwtAuthenticationFilter@539f7aea, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3478aacf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7f89669, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6149849, org.springframework.security.web.session.SessionManagementFilter@4613c6ef, org.springframework.security.web.access.ExceptionTranslationFilter@2e1ec45a, org.springframework.security.web.access.intercept.AuthorizationFilter@436c2e20]
2024-05-10 18:32:14.742 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 18:32:14.809 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 18:32:14.824 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 7.867 seconds (process running for 8.807)
2024-05-10 18:32:18.262 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 18:32:18.262 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 18:32:18.263 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 1 ms
2024-05-10 18:32:18.461 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 18:32:18.519 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 18:32:18.529 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 18:32:18.531 [http-nio-8080-exec-2] WARN  o.m.jdbc.message.server.ErrorPacket.warn - Error: 1452-23000: Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 18:32:18.532 [http-nio-8080-exec-2] WARN  o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - SQL Error: 1452, SQLState: 23000
2024-05-10 18:32:18.533 [http-nio-8080-exec-2] ERROR o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - (conn=248) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 18:32:18.548 [http-nio-8080-exec-2] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290), org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241), org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550), org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61), org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335), org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220), jdk.proxy4/jdk.proxy4.$Proxy151.save(Unknown Source), tfc.gestorRestaurante.models.services.Pedido.PedidoService.createPedido(PedidoService.java:58), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351), org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123), org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385), org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717), tfc.gestorRestaurante.models.services.Pedido.PedidoService$$SpringCGLIB$$0.createPedido(<generated>), tfc.gestorRestaurante.controllers.GestorRestauranteController.createPedido(GestorRestauranteController.java:66), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 18:32:18.558 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='could not execute statement [(conn=248) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 18:32:18.591 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [(conn=248) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]]
2024-05-10 18:39:22.546 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:39:22.550 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 18:39:22.555 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 18:39:27.690 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 13608 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 18:39:27.693 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 18:39:27.741 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 18:39:27.741 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 18:39:28.888 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 18:39:28.972 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 74 ms. Found 5 JPA repository interfaces.
2024-05-10 18:39:29.767 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 18:39:29.782 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 18:39:29.782 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 18:39:29.854 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 18:39:29.854 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 2111 ms
2024-05-10 18:39:30.023 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 18:39:30.144 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 18:39:30.204 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 18:39:30.246 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 18:39:30.474 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 18:39:30.503 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 18:39:30.587 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@8be42e
2024-05-10 18:39:30.589 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 18:39:31.789 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 18:39:31.866 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:39:32.369 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 18:39:33.784 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6c52fb9c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1e3a4275, org.springframework.security.web.context.SecurityContextHolderFilter@3c638173, org.springframework.security.web.header.HeaderWriterFilter@729df878, org.springframework.security.web.authentication.logout.LogoutFilter@239101c1, tfc.gestorRestaurante.security.JwtAuthenticationFilter@52c72c5e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2b1786d0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7e0f7add, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@31f0680c, org.springframework.security.web.session.SessionManagementFilter@56d8c82, org.springframework.security.web.access.ExceptionTranslationFilter@36c06370, org.springframework.security.web.access.intercept.AuthorizationFilter@30a8464d]
2024-05-10 18:39:34.354 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 18:39:34.410 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 18:39:34.422 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 7.307 seconds (process running for 8.255)
2024-05-10 18:39:39.325 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 18:39:39.326 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 18:39:39.327 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 1 ms
2024-05-10 18:39:39.509 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 18:39:39.557 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 18:39:39.569 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 18:39:39.571 [http-nio-8080-exec-1] WARN  o.m.jdbc.message.server.ErrorPacket.warn - Error: 1452-23000: Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 18:39:39.572 [http-nio-8080-exec-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - SQL Error: 1452, SQLState: 23000
2024-05-10 18:39:39.572 [http-nio-8080-exec-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - (conn=258) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 18:39:39.585 [http-nio-8080-exec-1] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290), org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241), org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550), org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61), org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335), org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220), jdk.proxy4/jdk.proxy4.$Proxy156.save(Unknown Source), tfc.gestorRestaurante.models.services.Pedido.PedidoService.createPedido(PedidoService.java:58), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351), org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123), org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385), org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717), tfc.gestorRestaurante.models.services.Pedido.PedidoService$$SpringCGLIB$$0.createPedido(<generated>), tfc.gestorRestaurante.controllers.GestorRestauranteController.createPedido(GestorRestauranteController.java:66), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 18:39:39.597 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='could not execute statement [(conn=258) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 18:39:39.631 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [(conn=258) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]]
2024-05-10 18:40:08.848 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`username`=?
2024-05-10 18:40:08.851 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user_role` r1_0 join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where r1_0.`user_id`=?
2024-05-10 18:40:08.922 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`email`=?
2024-05-10 18:40:08.995 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id` from `user` u1_0 where u1_0.`email`=?
2024-05-10 18:40:09.046 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - SELECT ur.role_id FROM user u          INNER JOIN user_role ur ON u.id = ur.user_id WHERE u.id = ?
2024-05-10 18:40:12.634 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 18:40:15.387 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 18:40:15.389 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 18:40:15.391 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 18:40:15.392 [http-nio-8080-exec-7] WARN  o.m.jdbc.message.server.ErrorPacket.warn - Error: 1452-23000: Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 18:40:15.393 [http-nio-8080-exec-7] WARN  o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - SQL Error: 1452, SQLState: 23000
2024-05-10 18:40:15.395 [http-nio-8080-exec-7] ERROR o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - (conn=258) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 18:40:15.402 [http-nio-8080-exec-7] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290), org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241), org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550), org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61), org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335), org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220), jdk.proxy4/jdk.proxy4.$Proxy156.save(Unknown Source), tfc.gestorRestaurante.models.services.Pedido.PedidoService.createPedido(PedidoService.java:58), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351), org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123), org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385), org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717), tfc.gestorRestaurante.models.services.Pedido.PedidoService$$SpringCGLIB$$0.createPedido(<generated>), tfc.gestorRestaurante.controllers.GestorRestauranteController.createPedido(GestorRestauranteController.java:66), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 18:40:15.403 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='could not execute statement [(conn=258) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 18:40:15.404 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [(conn=258) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]]
2024-05-10 18:53:55.908 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:53:55.913 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 18:53:55.917 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 18:54:05.407 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 9276 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 18:54:05.409 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 18:54:05.457 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 18:54:05.457 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 18:54:06.540 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 18:54:06.623 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 74 ms. Found 5 JPA repository interfaces.
2024-05-10 18:54:07.374 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 18:54:07.396 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 18:54:07.396 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 18:54:07.455 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 18:54:07.455 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 1997 ms
2024-05-10 18:54:07.613 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 18:54:07.722 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 18:54:07.772 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 18:54:07.803 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 18:54:08.028 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 18:54:08.053 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 18:54:08.141 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@3912e154
2024-05-10 18:54:08.143 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 18:54:09.239 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 18:54:09.319 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 18:54:09.835 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 18:54:10.947 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@450fd09, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3afcd42a, org.springframework.security.web.context.SecurityContextHolderFilter@7dcf9b19, org.springframework.security.web.header.HeaderWriterFilter@6b747f15, org.springframework.security.web.authentication.logout.LogoutFilter@5f2d2931, tfc.gestorRestaurante.security.JwtAuthenticationFilter@ddfbcdf, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4c474e9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@181e0662, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@22e24f1b, org.springframework.security.web.session.SessionManagementFilter@54c523c0, org.springframework.security.web.access.ExceptionTranslationFilter@b755572, org.springframework.security.web.access.intercept.AuthorizationFilter@4b4eab92]
2024-05-10 18:54:11.397 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 18:54:11.442 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 18:54:11.453 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 6.744 seconds (process running for 7.667)
2024-05-10 18:55:14.217 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 18:55:14.217 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 18:55:14.219 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 1 ms
2024-05-10 18:55:14.438 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 18:55:14.505 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 18:55:14.515 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 18:55:14.522 [http-nio-8080-exec-2] WARN  o.m.jdbc.message.server.ErrorPacket.warn - Error: 1452-23000: Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 18:55:14.524 [http-nio-8080-exec-2] WARN  o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - SQL Error: 1452, SQLState: 23000
2024-05-10 18:55:14.524 [http-nio-8080-exec-2] ERROR o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - (conn=268) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 18:55:14.535 [http-nio-8080-exec-2] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290), org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241), org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550), org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61), org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335), org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220), jdk.proxy4/jdk.proxy4.$Proxy152.save(Unknown Source), tfc.gestorRestaurante.models.services.Pedido.PedidoService.createPedido(PedidoService.java:58), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351), org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123), org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385), org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717), tfc.gestorRestaurante.models.services.Pedido.PedidoService$$SpringCGLIB$$0.createPedido(<generated>), tfc.gestorRestaurante.controllers.GestorRestauranteController.createPedido(GestorRestauranteController.java:66), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 18:55:14.550 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='could not execute statement [(conn=268) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 18:55:14.585 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [(conn=268) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]]
2024-05-10 18:55:25.854 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 18:55:25.857 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 18:55:25.859 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 18:55:25.861 [http-nio-8080-exec-4] WARN  o.m.jdbc.message.server.ErrorPacket.warn - Error: 1452-23000: Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 18:55:25.862 [http-nio-8080-exec-4] WARN  o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - SQL Error: 1452, SQLState: 23000
2024-05-10 18:55:25.863 [http-nio-8080-exec-4] ERROR o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - (conn=268) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 18:55:25.870 [http-nio-8080-exec-4] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290), org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241), org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550), org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61), org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335), org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220), jdk.proxy4/jdk.proxy4.$Proxy152.save(Unknown Source), tfc.gestorRestaurante.models.services.Pedido.PedidoService.createPedido(PedidoService.java:58), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351), org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123), org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385), org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717), tfc.gestorRestaurante.models.services.Pedido.PedidoService$$SpringCGLIB$$0.createPedido(<generated>), tfc.gestorRestaurante.controllers.GestorRestauranteController.createPedido(GestorRestauranteController.java:66), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 18:55:25.871 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='could not execute statement [(conn=268) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 18:55:25.872 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [(conn=268) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]]
2024-05-10 19:17:51.547 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-05-10 19:17:51.564 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 19:17:51.569 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 19:17:51.575 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 19:17:51.736 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 9276 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 19:17:51.738 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 19:17:52.325 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 19:17:52.368 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 41 ms. Found 5 JPA repository interfaces.
2024-05-10 19:17:52.687 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 19:17:52.691 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 19:17:52.691 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 19:17:52.722 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 19:17:52.723 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 979 ms
2024-05-10 19:17:52.830 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 19:17:52.901 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 19:17:52.907 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 19:17:52.916 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 19:17:52.919 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Starting...
2024-05-10 19:17:52.927 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-2 - Added connection org.mariadb.jdbc.Connection@633b3762
2024-05-10 19:17:52.929 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Start completed.
2024-05-10 19:17:53.184 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 19:17:53.219 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 19:17:54.059 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@65c1dc4f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@74857c4a, org.springframework.security.web.context.SecurityContextHolderFilter@607f1ab8, org.springframework.security.web.header.HeaderWriterFilter@164c88ca, org.springframework.security.web.authentication.logout.LogoutFilter@4b1b59c4, tfc.gestorRestaurante.security.JwtAuthenticationFilter@16986351, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2b07c979, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@597f0e0b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3a67abe0, org.springframework.security.web.session.SessionManagementFilter@4ec8929d, org.springframework.security.web.access.ExceptionTranslationFilter@78567ca2, org.springframework.security.web.access.intercept.AuthorizationFilter@7fec5f5a]
2024-05-10 19:17:54.453 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 19:17:54.474 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 19:17:54.480 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 2.815 seconds (process running for 1430.694)
2024-05-10 19:17:54.485 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener.onApplicationEvent - Condition evaluation unchanged
2024-05-10 19:17:55.591 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 19:17:55.592 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown initiated...
2024-05-10 19:17:55.595 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown completed.
2024-05-10 19:20:19.618 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 14200 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 19:20:19.622 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 19:20:19.670 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 19:20:19.671 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 19:20:20.834 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 19:20:20.913 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 71 ms. Found 5 JPA repository interfaces.
2024-05-10 19:20:21.792 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 19:20:21.819 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 19:20:21.820 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 19:20:21.894 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 19:20:21.894 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 2223 ms
2024-05-10 19:20:22.102 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 19:20:22.228 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 19:20:22.285 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 19:20:22.334 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 19:20:22.630 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 19:20:22.658 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 19:20:22.742 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@16c35958
2024-05-10 19:20:22.744 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 19:20:23.880 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 19:20:23.959 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 19:20:24.471 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 19:20:26.027 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@c3a050f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1f0f895a, org.springframework.security.web.context.SecurityContextHolderFilter@342ecdb1, org.springframework.security.web.header.HeaderWriterFilter@611833e2, org.springframework.security.web.authentication.logout.LogoutFilter@1079e91c, tfc.gestorRestaurante.security.JwtAuthenticationFilter@1f3ff008, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@43bddce5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4585691a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@a9addf3, org.springframework.security.web.session.SessionManagementFilter@42ec219, org.springframework.security.web.access.ExceptionTranslationFilter@523b215d, org.springframework.security.web.access.intercept.AuthorizationFilter@583973e9]
2024-05-10 19:20:26.555 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 19:20:26.601 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 19:20:26.611 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 7.741 seconds (process running for 8.72)
2024-05-10 19:20:34.551 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 19:20:34.551 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 19:20:34.553 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 1 ms
2024-05-10 19:20:34.791 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 19:20:34.842 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 19:20:34.852 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 19:20:34.856 [http-nio-8080-exec-1] WARN  o.m.jdbc.message.server.ErrorPacket.warn - Error: 1452-23000: Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 19:20:34.857 [http-nio-8080-exec-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - SQL Error: 1452, SQLState: 23000
2024-05-10 19:20:34.858 [http-nio-8080-exec-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - (conn=288) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 19:20:34.871 [http-nio-8080-exec-1] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290), org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241), org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550), org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61), org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335), org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220), jdk.proxy4/jdk.proxy4.$Proxy157.save(Unknown Source), tfc.gestorRestaurante.models.services.Pedido.PedidoService.createPedido(PedidoService.java:58), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351), org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123), org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385), org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717), tfc.gestorRestaurante.models.services.Pedido.PedidoService$$SpringCGLIB$$0.createPedido(<generated>), tfc.gestorRestaurante.controllers.GestorRestauranteController.createPedido(GestorRestauranteController.java:69), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 19:20:34.883 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='could not execute statement [(conn=288) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 19:20:34.918 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [(conn=288) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]]
2024-05-10 19:21:34.274 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-05-10 19:21:34.289 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 19:21:34.294 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 19:21:34.298 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 19:21:34.408 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 14200 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 19:21:34.408 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 19:21:35.113 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 19:21:35.218 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 104 ms. Found 5 JPA repository interfaces.
2024-05-10 19:21:36.049 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 19:21:36.051 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 19:21:36.052 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 19:21:36.079 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 19:21:36.080 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 1668 ms
2024-05-10 19:21:36.170 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 19:21:36.216 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 19:21:36.220 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 19:21:36.224 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 19:21:36.226 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Starting...
2024-05-10 19:21:36.229 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-2 - Added connection org.mariadb.jdbc.Connection@1525cce0
2024-05-10 19:21:36.231 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Start completed.
2024-05-10 19:21:36.396 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 19:21:36.432 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 19:21:36.940 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext.refresh - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'gestorRestauranteController': Unsatisfied dependency expressed through field 'pedidoService': No qualifying bean of type 'tfc.gestorRestaurante.models.services.Pedido.IPedidoService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
2024-05-10 19:21:36.942 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 19:21:36.943 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown initiated...
2024-05-10 19:21:36.945 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown completed.
2024-05-10 19:21:36.947 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Stopping service [Tomcat]
2024-05-10 19:21:36.954 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger.logMessage - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-10 19:21:36.992 [restartedMain] ERROR o.s.b.d.LoggingFailureAnalysisReporter.report - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Field pedidoService in tfc.gestorRestaurante.controllers.GestorRestauranteController required a bean of type 'tfc.gestorRestaurante.models.services.Pedido.IPedidoService' that could not be found.

The injection point has the following annotations:
	- @org.springframework.beans.factory.annotation.Autowired(required=true)


Action:

Consider defining a bean of type 'tfc.gestorRestaurante.models.services.Pedido.IPedidoService' in your configuration.

2024-05-10 19:21:38.483 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 14200 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 19:21:38.484 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 19:21:38.797 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 19:21:38.823 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 25 ms. Found 5 JPA repository interfaces.
2024-05-10 19:21:38.960 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 19:21:38.961 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 19:21:38.961 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 19:21:38.977 [restartedMain] INFO  o.a.c.c.C.[Tomcat-1].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 19:21:38.977 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 492 ms
2024-05-10 19:21:39.034 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 19:21:39.086 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 19:21:39.088 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 19:21:39.092 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 19:21:39.093 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-3 - Starting...
2024-05-10 19:21:39.097 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-3 - Added connection org.mariadb.jdbc.Connection@376b2bf6
2024-05-10 19:21:39.097 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-3 - Start completed.
2024-05-10 19:21:39.210 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 19:21:39.236 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 19:21:39.784 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1546ee09, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@399dd31c, org.springframework.security.web.context.SecurityContextHolderFilter@682ec9df, org.springframework.security.web.header.HeaderWriterFilter@2de32fde, org.springframework.security.web.authentication.logout.LogoutFilter@2b70e0f5, tfc.gestorRestaurante.security.JwtAuthenticationFilter@14abbafe, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@239fdc6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3690bf80, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@8ba2dc0, org.springframework.security.web.session.SessionManagementFilter@31c64b7b, org.springframework.security.web.access.ExceptionTranslationFilter@165f8458, org.springframework.security.web.access.intercept.AuthorizationFilter@55b53062]
2024-05-10 19:21:40.023 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 19:21:40.040 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 19:21:40.045 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 1.597 seconds (process running for 82.154)
2024-05-10 19:21:40.050 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener.onApplicationEvent - Condition evaluation unchanged
2024-05-10 19:22:38.986 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat-1].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 19:22:38.986 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 19:22:38.988 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 2 ms
2024-05-10 19:22:39.008 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 19:22:39.012 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 19:22:39.014 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 19:22:39.015 [http-nio-8080-exec-2] WARN  o.m.jdbc.message.server.ErrorPacket.warn - Error: 1452-23000: Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 19:22:39.017 [http-nio-8080-exec-2] WARN  o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - SQL Error: 1452, SQLState: 23000
2024-05-10 19:22:39.017 [http-nio-8080-exec-2] ERROR o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - (conn=308) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 19:22:39.027 [http-nio-8080-exec-2] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290), org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241), org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550), org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61), org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335), org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220), jdk.proxy8/jdk.proxy8.$Proxy189.save(Unknown Source), tfc.gestorRestaurante.models.services.Pedido.PedidoService.createPedido(PedidoService.java:60), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351), org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123), org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385), org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717), tfc.gestorRestaurante.models.services.Pedido.PedidoService$$SpringCGLIB$$0.createPedido(<generated>), tfc.gestorRestaurante.controllers.GestorRestauranteController.createPedido(GestorRestauranteController.java:69), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 19:22:39.029 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='could not execute statement [(conn=308) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 19:22:39.034 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [(conn=308) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]]
2024-05-10 19:28:33.480 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 19:28:33.481 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-3 - Shutdown initiated...
2024-05-10 19:28:33.484 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-3 - Shutdown completed.
2024-05-10 19:28:39.260 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 16552 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 19:28:39.264 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 19:28:39.338 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 19:28:39.340 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 19:28:40.857 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 19:28:40.949 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 82 ms. Found 5 JPA repository interfaces.
2024-05-10 19:28:41.924 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 19:28:41.937 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 19:28:41.937 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 19:28:42.001 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 19:28:42.002 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 2661 ms
2024-05-10 19:28:42.186 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 19:28:42.301 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 19:28:42.359 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 19:28:42.399 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 19:28:42.651 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 19:28:42.680 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 19:28:42.769 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@5b79e6a9
2024-05-10 19:28:42.778 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 19:28:43.976 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 19:28:44.051 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 19:28:44.553 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 19:28:45.878 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5afd7f05, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2f9c353e, org.springframework.security.web.context.SecurityContextHolderFilter@67fe36d6, org.springframework.security.web.header.HeaderWriterFilter@71d5a929, org.springframework.security.web.authentication.logout.LogoutFilter@1986cc62, tfc.gestorRestaurante.security.JwtAuthenticationFilter@81446f9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@41433c19, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@23ec57b4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7da7fba5, org.springframework.security.web.session.SessionManagementFilter@13960844, org.springframework.security.web.access.ExceptionTranslationFilter@770cd1d1, org.springframework.security.web.access.intercept.AuthorizationFilter@3f795db1]
2024-05-10 19:28:46.364 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 19:28:46.415 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 19:28:46.425 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 7.928 seconds (process running for 8.985)
2024-05-10 19:29:33.858 [http-nio-8080-exec-4] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 19:29:33.858 [http-nio-8080-exec-4] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 19:29:33.860 [http-nio-8080-exec-4] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 2 ms
2024-05-10 19:29:34.105 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 19:29:34.156 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 19:29:34.165 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 19:29:34.167 [http-nio-8080-exec-4] WARN  o.m.jdbc.message.server.ErrorPacket.warn - Error: 1452-23000: Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 19:29:34.168 [http-nio-8080-exec-4] WARN  o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - SQL Error: 1452, SQLState: 23000
2024-05-10 19:29:34.169 [http-nio-8080-exec-4] ERROR o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - (conn=318) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 19:29:34.188 [http-nio-8080-exec-4] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290), org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241), org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550), org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61), org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335), org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220), jdk.proxy4/jdk.proxy4.$Proxy155.save(Unknown Source), tfc.gestorRestaurante.models.services.Pedido.PedidoService.createPedido(PedidoService.java:60), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351), org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123), org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385), org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717), tfc.gestorRestaurante.models.services.Pedido.PedidoService$$SpringCGLIB$$0.createPedido(<generated>), tfc.gestorRestaurante.controllers.GestorRestauranteController.createPedido(GestorRestauranteController.java:69), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 19:29:34.202 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='could not execute statement [(conn=318) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 19:29:34.241 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [(conn=318) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]]
2024-05-10 19:32:06.838 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-05-10 19:32:06.858 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 19:32:06.864 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 19:32:06.869 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 19:32:06.994 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 16552 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 19:32:06.995 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 19:32:07.698 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 19:32:07.737 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 37 ms. Found 5 JPA repository interfaces.
2024-05-10 19:32:08.028 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 19:32:08.029 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 19:32:08.030 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 19:32:08.054 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 19:32:08.054 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 1056 ms
2024-05-10 19:32:08.144 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 19:32:08.201 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 19:32:08.206 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 19:32:08.213 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 19:32:08.214 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Starting...
2024-05-10 19:32:08.219 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-2 - Added connection org.mariadb.jdbc.Connection@424759f8
2024-05-10 19:32:08.220 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Start completed.
2024-05-10 19:32:08.515 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 19:32:08.561 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 19:32:09.229 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext.refresh - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'gestorRestauranteController': Unsatisfied dependency expressed through field 'pedidoService': No qualifying bean of type 'tfc.gestorRestaurante.models.services.Pedido.IPedidoService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
2024-05-10 19:32:09.232 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 19:32:09.235 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown initiated...
2024-05-10 19:32:09.237 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown completed.
2024-05-10 19:32:09.238 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Stopping service [Tomcat]
2024-05-10 19:32:09.246 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger.logMessage - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-10 19:32:09.295 [restartedMain] ERROR o.s.b.d.LoggingFailureAnalysisReporter.report - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Field pedidoService in tfc.gestorRestaurante.controllers.GestorRestauranteController required a bean of type 'tfc.gestorRestaurante.models.services.Pedido.IPedidoService' that could not be found.

The injection point has the following annotations:
	- @org.springframework.beans.factory.annotation.Autowired(required=true)


Action:

Consider defining a bean of type 'tfc.gestorRestaurante.models.services.Pedido.IPedidoService' in your configuration.

2024-05-10 19:32:10.787 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 16552 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 19:32:10.788 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 19:32:11.271 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 19:32:11.301 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 28 ms. Found 5 JPA repository interfaces.
2024-05-10 19:32:11.568 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 19:32:11.570 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 19:32:11.570 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 19:32:11.589 [restartedMain] INFO  o.a.c.c.C.[Tomcat-1].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 19:32:11.589 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 799 ms
2024-05-10 19:32:11.668 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 19:32:11.723 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 19:32:11.728 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 19:32:11.735 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 19:32:11.736 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-3 - Starting...
2024-05-10 19:32:11.742 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-3 - Added connection org.mariadb.jdbc.Connection@21ed7b61
2024-05-10 19:32:11.743 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-3 - Start completed.
2024-05-10 19:32:12.051 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 19:32:12.084 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 19:32:12.688 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@393ccc2b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70bab089, org.springframework.security.web.context.SecurityContextHolderFilter@36d8e907, org.springframework.security.web.header.HeaderWriterFilter@3dd03122, org.springframework.security.web.authentication.logout.LogoutFilter@1caabcb1, tfc.gestorRestaurante.security.JwtAuthenticationFilter@5312a835, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5b2a6dd2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@67cf1eb4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5448b6db, org.springframework.security.web.session.SessionManagementFilter@42a904ef, org.springframework.security.web.access.ExceptionTranslationFilter@51b78513, org.springframework.security.web.access.intercept.AuthorizationFilter@b43809d]
2024-05-10 19:32:13.021 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 19:32:13.044 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 19:32:13.049 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 2.297 seconds (process running for 215.61)
2024-05-10 19:32:13.053 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener.onApplicationEvent - Condition evaluation unchanged
2024-05-10 19:39:04.939 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 19:39:04.940 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-3 - Shutdown initiated...
2024-05-10 19:39:04.944 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-3 - Shutdown completed.
2024-05-10 19:39:08.524 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 9524 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 19:39:08.527 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 19:39:08.574 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 19:39:08.574 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 19:39:09.632 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 19:39:09.708 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 68 ms. Found 5 JPA repository interfaces.
2024-05-10 19:39:10.434 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 19:39:10.447 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 19:39:10.447 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 19:39:10.516 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 19:39:10.516 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 1941 ms
2024-05-10 19:39:10.664 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 19:39:10.785 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 19:39:10.838 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 19:39:10.881 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 19:39:11.112 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 19:39:11.138 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 19:39:11.225 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@2b29cd27
2024-05-10 19:39:11.228 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 19:39:12.365 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 19:39:12.437 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 19:39:12.966 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 19:39:14.097 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2a866b40, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@514e33e4, org.springframework.security.web.context.SecurityContextHolderFilter@41b0c806, org.springframework.security.web.header.HeaderWriterFilter@30b1bec, org.springframework.security.web.authentication.logout.LogoutFilter@366ac29e, tfc.gestorRestaurante.security.JwtAuthenticationFilter@2c185fc3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@265ffc5a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@22e50668, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7e2ca9a8, org.springframework.security.web.session.SessionManagementFilter@1ad7363f, org.springframework.security.web.access.ExceptionTranslationFilter@d1db5b5, org.springframework.security.web.access.intercept.AuthorizationFilter@66c3ae0a]
2024-05-10 19:39:14.587 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 19:39:14.636 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 19:39:14.646 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 6.802 seconds (process running for 7.921)
2024-05-10 19:42:34.839 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 19:42:34.839 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 19:42:34.841 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 2 ms
2024-05-10 19:42:35.121 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`username`=?
2024-05-10 19:42:35.156 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user_role` r1_0 join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where r1_0.`user_id`=?
2024-05-10 19:42:35.234 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`email`=?
2024-05-10 19:42:35.376 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id` from `user` u1_0 where u1_0.`email`=?
2024-05-10 19:42:35.501 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - SELECT ur.role_id FROM user u          INNER JOIN user_role ur ON u.id = ur.user_id WHERE u.id = ?
2024-05-10 19:42:39.318 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 19:42:46.191 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 19:42:46.213 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 19:42:46.220 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 19:42:46.222 [http-nio-8080-exec-5] WARN  o.m.jdbc.message.server.ErrorPacket.warn - Error: 1452-23000: Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 19:42:46.223 [http-nio-8080-exec-5] WARN  o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - SQL Error: 1452, SQLState: 23000
2024-05-10 19:42:46.224 [http-nio-8080-exec-5] ERROR o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - (conn=348) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 19:42:46.237 [http-nio-8080-exec-5] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290), org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241), org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550), org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61), org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335), org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220), jdk.proxy4/jdk.proxy4.$Proxy154.save(Unknown Source), tfc.gestorRestaurante.models.services.Pedido.PedidoService.createPedido(PedidoService.java:60), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351), org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123), org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385), org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717), tfc.gestorRestaurante.models.services.Pedido.PedidoService$$SpringCGLIB$$0.createPedido(<generated>), tfc.gestorRestaurante.controllers.GestorRestauranteController.createPedido(GestorRestauranteController.java:69), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 19:42:46.244 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='could not execute statement [(conn=348) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 19:42:46.252 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [(conn=348) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]]
2024-05-10 19:46:39.221 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-05-10 19:46:39.245 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 19:46:39.252 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 19:46:39.262 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 19:46:39.438 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 9524 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 19:46:39.438 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 19:46:40.112 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 19:46:40.176 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 63 ms. Found 5 JPA repository interfaces.
2024-05-10 19:46:40.507 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 19:46:40.510 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 19:46:40.510 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 19:46:40.530 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 19:46:40.531 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 1088 ms
2024-05-10 19:46:40.605 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 19:46:40.679 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 19:46:40.682 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 19:46:40.689 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 19:46:40.691 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Starting...
2024-05-10 19:46:40.697 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-2 - Added connection org.mariadb.jdbc.Connection@74dd3f1d
2024-05-10 19:46:40.698 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Start completed.
2024-05-10 19:46:40.890 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 19:46:40.924 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 19:46:41.523 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext.refresh - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'gestorRestauranteController': Unsatisfied dependency expressed through field 'pedidoService': No qualifying bean of type 'tfc.gestorRestaurante.models.services.Pedido.IPedidoService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
2024-05-10 19:46:41.525 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 19:46:41.526 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown initiated...
2024-05-10 19:46:41.528 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown completed.
2024-05-10 19:46:41.529 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Stopping service [Tomcat]
2024-05-10 19:46:41.538 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger.logMessage - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-10 19:46:41.589 [restartedMain] ERROR o.s.b.d.LoggingFailureAnalysisReporter.report - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Field pedidoService in tfc.gestorRestaurante.controllers.GestorRestauranteController required a bean of type 'tfc.gestorRestaurante.models.services.Pedido.IPedidoService' that could not be found.

The injection point has the following annotations:
	- @org.springframework.beans.factory.annotation.Autowired(required=true)


Action:

Consider defining a bean of type 'tfc.gestorRestaurante.models.services.Pedido.IPedidoService' in your configuration.

2024-05-10 19:46:43.064 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 9524 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 19:46:43.065 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 19:46:43.350 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 19:46:43.382 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 31 ms. Found 5 JPA repository interfaces.
2024-05-10 19:46:43.521 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 19:46:43.523 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 19:46:43.523 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 19:46:43.539 [restartedMain] INFO  o.a.c.c.C.[Tomcat-1].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 19:46:43.539 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 472 ms
2024-05-10 19:46:43.601 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 19:46:43.641 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 19:46:43.644 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 19:46:43.649 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 19:46:43.650 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-3 - Starting...
2024-05-10 19:46:43.653 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-3 - Added connection org.mariadb.jdbc.Connection@763767df
2024-05-10 19:46:43.654 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-3 - Start completed.
2024-05-10 19:46:43.789 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 19:46:43.817 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 19:46:44.340 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5e696987, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3ec53fb, org.springframework.security.web.context.SecurityContextHolderFilter@3dcc59fb, org.springframework.security.web.header.HeaderWriterFilter@1e4ed222, org.springframework.security.web.authentication.logout.LogoutFilter@6816a9d8, tfc.gestorRestaurante.security.JwtAuthenticationFilter@22b134a7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@31766f01, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@59c174cf, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3f279917, org.springframework.security.web.session.SessionManagementFilter@11dff0b, org.springframework.security.web.access.ExceptionTranslationFilter@698cb754, org.springframework.security.web.access.intercept.AuthorizationFilter@38afbb2c]
2024-05-10 19:46:44.596 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 19:46:44.617 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 19:46:44.620 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 1.594 seconds (process running for 457.895)
2024-05-10 19:46:44.624 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener.onApplicationEvent - Condition evaluation unchanged
2024-05-10 19:57:30.529 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat-1].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 19:57:30.529 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 19:57:30.533 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 4 ms
2024-05-10 19:57:30.579 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 19:57:30.586 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 19:57:30.589 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 19:57:30.593 [http-nio-8080-exec-2] WARN  o.m.jdbc.message.server.ErrorPacket.warn - Error: 1452-23000: Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 19:57:30.596 [http-nio-8080-exec-2] WARN  o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - SQL Error: 1452, SQLState: 23000
2024-05-10 19:57:30.598 [http-nio-8080-exec-2] ERROR o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - (conn=368) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 19:57:30.605 [http-nio-8080-exec-2] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290), org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241), org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550), org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61), org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335), org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220), jdk.proxy8/jdk.proxy8.$Proxy193.save(Unknown Source), tfc.gestorRestaurante.models.services.Pedido.PedidoService.createPedido(PedidoService.java:60), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351), org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123), org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385), org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717), tfc.gestorRestaurante.models.services.Pedido.PedidoService$$SpringCGLIB$$0.createPedido(<generated>), tfc.gestorRestaurante.controllers.GestorRestauranteController.createPedido(GestorRestauranteController.java:69), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 19:57:30.607 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='could not execute statement [(conn=368) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 19:57:30.626 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [(conn=368) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]]
2024-05-10 19:58:46.596 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 19:58:46.602 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 19:58:46.606 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 19:58:46.608 [http-nio-8080-exec-3] WARN  o.m.jdbc.message.server.ErrorPacket.warn - Error: 1452-23000: Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 19:58:46.609 [http-nio-8080-exec-3] WARN  o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - SQL Error: 1452, SQLState: 23000
2024-05-10 19:58:46.609 [http-nio-8080-exec-3] ERROR o.h.e.jdbc.spi.SqlExceptionHelper.logExceptions - (conn=368) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))
2024-05-10 19:58:46.619 [http-nio-8080-exec-3] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290), org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241), org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550), org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61), org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335), org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220), jdk.proxy8/jdk.proxy8.$Proxy193.save(Unknown Source), tfc.gestorRestaurante.models.services.Pedido.PedidoService.createPedido(PedidoService.java:60), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351), org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123), org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385), org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717), tfc.gestorRestaurante.models.services.Pedido.PedidoService$$SpringCGLIB$$0.createPedido(<generated>), tfc.gestorRestaurante.controllers.GestorRestauranteController.createPedido(GestorRestauranteController.java:69), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 19:58:46.621 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='could not execute statement [(conn=368) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 19:58:46.623 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [(conn=368) Cannot add or update a child row: a foreign key constraint fails (`gestorrestaurantetfg`.`detalle_pedido`, CONSTRAINT `FKcyy990j2efdhlrilye32brfea` FOREIGN KEY (`pedido_id`) REFERENCES `pedido` (`id`))] [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; SQL [insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)]; constraint [null]]
2024-05-10 19:58:54.845 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 19:58:54.851 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 19:58:54.856 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 19:58:54.859 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 19:58:54.878 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 19:58:54.883 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 19:58:54.916 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 19:58:54.923 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:00:38.134 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 20:00:38.137 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 20:00:38.140 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:00:38.146 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:00:38.153 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:00:59.115 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 20:00:59.119 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 20:00:59.121 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:00:59.123 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:00:59.136 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:06:15.995 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 20:06:16.000 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 20:06:16.002 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:06:16.005 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:06:16.015 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:07:21.247 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 20:07:21.252 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 20:07:21.255 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:07:21.259 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:07:21.266 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:07:51.748 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:07:51.749 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-3 - Shutdown initiated...
2024-05-10 20:07:51.753 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-3 - Shutdown completed.
2024-05-10 20:07:57.732 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 8804 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 20:07:57.736 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 20:07:57.821 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 20:07:57.822 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 20:07:59.716 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 20:07:59.844 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 116 ms. Found 5 JPA repository interfaces.
2024-05-10 20:08:01.506 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 20:08:01.530 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 20:08:01.531 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 20:08:01.632 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 20:08:01.635 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 3809 ms
2024-05-10 20:08:01.943 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 20:08:02.150 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 20:08:02.237 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 20:08:02.289 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 20:08:02.798 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 20:08:02.855 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 20:08:03.028 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@473ef6df
2024-05-10 20:08:03.033 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 20:08:05.153 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 20:08:05.266 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:08:06.517 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 20:08:08.999 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3d3f80a6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@32592f20, org.springframework.security.web.context.SecurityContextHolderFilter@5441df09, org.springframework.security.web.header.HeaderWriterFilter@29c49822, org.springframework.security.web.authentication.logout.LogoutFilter@35242e24, tfc.gestorRestaurante.security.JwtAuthenticationFilter@6f6da62d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1b5e8bb3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@64c7a5c5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5ca7b11f, org.springframework.security.web.session.SessionManagementFilter@74dab2e7, org.springframework.security.web.access.ExceptionTranslationFilter@54eeb7a4, org.springframework.security.web.access.intercept.AuthorizationFilter@1962d170]
2024-05-10 20:08:09.906 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 20:08:09.985 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 20:08:10.001 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 13.176 seconds (process running for 15.545)
2024-05-10 20:08:15.473 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 20:08:15.474 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 20:08:15.479 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 4 ms
2024-05-10 20:08:15.873 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 20:08:15.949 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 20:08:15.971 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:08:15.984 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:09:24.121 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool.run - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m20s974ms226µs800ns).
2024-05-10 20:09:24.155 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:09:24.159 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 20:09:24.170 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 20:09:24.177 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:09:24.184 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:09:24.193 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:09:24.258 [http-nio-8080-exec-2] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:344), org.apache.catalina.connector.OutputBuffer.flushByteBuffer(OutputBuffer.java:773), org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:294), org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:267), org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:120), org.springframework.security.web.util.OnCommittedResponseWrapper$SaveContextServletOutputStream.flush(OnCommittedResponseWrapper.java:524), java.base/java.io.FilterOutputStream.flush(FilterOutputStream.java:155), com.fasterxml.jackson.core.json.UTF8JsonGenerator.flush(UTF8JsonGenerator.java:1200), com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1063), org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:483), org.springframework.http.converter.AbstractGenericHttpMessageConverter.write(AbstractGenericHttpMessageConverter.java:114), org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:297), org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:245), org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78), org.springframework.hateoas.server.mvc.RepresentationModelProcessorHandlerMethodReturnValueHandler.handleReturnValue(RepresentationModelProcessorHandlerMethodReturnValueHandler.java:108), org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 20:09:24.258 [http-nio-8080-exec-3] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:344), org.apache.catalina.connector.OutputBuffer.flushByteBuffer(OutputBuffer.java:773), org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:294), org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:267), org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:120), org.springframework.security.web.util.OnCommittedResponseWrapper$SaveContextServletOutputStream.flush(OnCommittedResponseWrapper.java:524), java.base/java.io.FilterOutputStream.flush(FilterOutputStream.java:155), com.fasterxml.jackson.core.json.UTF8JsonGenerator.flush(UTF8JsonGenerator.java:1200), com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1063), org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:483), org.springframework.http.converter.AbstractGenericHttpMessageConverter.write(AbstractGenericHttpMessageConverter.java:114), org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:297), org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:245), org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78), org.springframework.hateoas.server.mvc.RepresentationModelProcessorHandlerMethodReturnValueHandler.handleReturnValue(RepresentationModelProcessorHandlerMethodReturnValueHandler.java:108), org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 20:09:24.272 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='java.nio.channels.ClosedChannelException', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 20:09:24.272 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='java.nio.channels.ClosedChannelException', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 20:09:24.293 [http-nio-8080-exec-3] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:344), org.apache.catalina.connector.OutputBuffer.flushByteBuffer(OutputBuffer.java:773), org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:294), org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:267), org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:120), org.springframework.security.web.util.OnCommittedResponseWrapper$SaveContextServletOutputStream.flush(OnCommittedResponseWrapper.java:524), java.base/java.io.FilterOutputStream.flush(FilterOutputStream.java:155), com.fasterxml.jackson.core.json.UTF8JsonGenerator.flush(UTF8JsonGenerator.java:1200), com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1063), org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:483), org.springframework.http.converter.AbstractGenericHttpMessageConverter.write(AbstractGenericHttpMessageConverter.java:114), org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:297), org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:245), org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78), org.springframework.hateoas.server.mvc.RepresentationModelProcessorHandlerMethodReturnValueHandler.handleReturnValue(RepresentationModelProcessorHandlerMethodReturnValueHandler.java:108), org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 20:09:24.293 [http-nio-8080-exec-2] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:344), org.apache.catalina.connector.OutputBuffer.flushByteBuffer(OutputBuffer.java:773), org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:294), org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:267), org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:120), org.springframework.security.web.util.OnCommittedResponseWrapper$SaveContextServletOutputStream.flush(OnCommittedResponseWrapper.java:524), java.base/java.io.FilterOutputStream.flush(FilterOutputStream.java:155), com.fasterxml.jackson.core.json.UTF8JsonGenerator.flush(UTF8JsonGenerator.java:1200), com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1063), org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:483), org.springframework.http.converter.AbstractGenericHttpMessageConverter.write(AbstractGenericHttpMessageConverter.java:114), org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:297), org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:245), org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78), org.springframework.hateoas.server.mvc.RepresentationModelProcessorHandlerMethodReturnValueHandler.handleReturnValue(RepresentationModelProcessorHandlerMethodReturnValueHandler.java:108), org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 20:09:24.294 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='java.nio.channels.ClosedChannelException', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 20:09:24.294 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='java.nio.channels.ClosedChannelException', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 20:09:24.307 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:09:24.313 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 20:09:24.319 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 20:09:29.461 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 7900 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 20:09:29.465 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 20:09:29.551 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 20:09:29.551 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 20:09:31.697 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 20:09:31.904 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 155 ms. Found 5 JPA repository interfaces.
2024-05-10 20:09:33.413 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 20:09:33.435 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 20:09:33.435 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 20:09:33.550 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 20:09:33.550 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 3996 ms
2024-05-10 20:09:33.897 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 20:09:34.180 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 20:09:34.328 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 20:09:34.406 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 20:09:34.998 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 20:09:35.062 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 20:09:35.282 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@34ad845a
2024-05-10 20:09:35.288 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 20:09:37.441 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 20:09:37.550 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:09:38.429 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 20:09:40.343 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5a9ed7c8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2e301aab, org.springframework.security.web.context.SecurityContextHolderFilter@2879443f, org.springframework.security.web.header.HeaderWriterFilter@46f44c30, org.springframework.security.web.authentication.logout.LogoutFilter@79879b78, tfc.gestorRestaurante.security.JwtAuthenticationFilter@75061428, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4375713, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7d4ee297, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7f7481c1, org.springframework.security.web.session.SessionManagementFilter@37d88e49, org.springframework.security.web.access.ExceptionTranslationFilter@2dcd341e, org.springframework.security.web.access.intercept.AuthorizationFilter@f3f6cbc]
2024-05-10 20:09:41.125 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 20:09:41.203 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 20:09:41.217 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 13.11 seconds (process running for 14.812)
2024-05-10 20:09:47.217 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 20:09:47.218 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 20:09:47.221 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 3 ms
2024-05-10 20:09:47.664 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 20:09:47.738 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 20:09:47.755 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:09:47.771 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:15:14.980 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool.run - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=5m39s587ms456µs300ns).
2024-05-10 20:17:25.955 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool.run - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m32s957ms661µs300ns).
2024-05-10 20:17:33.439 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:17:52.208 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-05-10 20:17:52.230 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:17:52.237 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 20:17:52.242 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 20:17:52.430 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 7900 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 20:17:52.431 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 20:17:53.172 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 20:17:53.225 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 51 ms. Found 5 JPA repository interfaces.
2024-05-10 20:17:53.660 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 20:17:53.663 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 20:17:53.664 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 20:17:53.693 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 20:17:53.694 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 1257 ms
2024-05-10 20:17:53.823 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 20:17:53.910 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 20:17:53.914 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 20:17:53.923 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 20:17:53.926 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Starting...
2024-05-10 20:17:53.935 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-2 - Added connection org.mariadb.jdbc.Connection@314e7738
2024-05-10 20:17:53.937 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Start completed.
2024-05-10 20:17:54.172 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 20:17:54.206 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:17:55.306 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@413cfa7a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4b20b03c, org.springframework.security.web.context.SecurityContextHolderFilter@4a9e348e, org.springframework.security.web.header.HeaderWriterFilter@461a1467, org.springframework.security.web.authentication.logout.LogoutFilter@11737cb5, tfc.gestorRestaurante.security.JwtAuthenticationFilter@60fc9b1e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@51545aea, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@47fbc58b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@36653e0c, org.springframework.security.web.session.SessionManagementFilter@56d7666b, org.springframework.security.web.access.ExceptionTranslationFilter@3625be81, org.springframework.security.web.access.intercept.AuthorizationFilter@7b4da12d]
2024-05-10 20:17:55.764 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 20:17:55.796 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 20:17:55.804 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 3.46 seconds (process running for 509.398)
2024-05-10 20:17:55.809 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener.onApplicationEvent - Condition evaluation unchanged
2024-05-10 20:17:57.205 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2024-05-10 20:17:57.212 [Thread-7] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:17:57.214 [Thread-7] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown initiated...
2024-05-10 20:17:57.216 [Thread-7] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown completed.
2024-05-10 20:17:57.336 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 7900 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 20:17:57.337 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 20:17:57.797 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 20:17:57.834 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 36 ms. Found 5 JPA repository interfaces.
2024-05-10 20:17:58.062 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 20:17:58.064 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 20:17:58.064 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 20:17:58.086 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 20:17:58.086 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 747 ms
2024-05-10 20:17:58.155 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 20:17:58.210 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 20:17:58.214 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 20:17:58.220 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 20:17:58.222 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-3 - Starting...
2024-05-10 20:17:58.225 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-3 - Added connection org.mariadb.jdbc.Connection@2419ec8f
2024-05-10 20:17:58.226 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-3 - Start completed.
2024-05-10 20:17:58.419 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 20:17:58.443 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:17:59.160 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@63596d54, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@47dafc1a, org.springframework.security.web.context.SecurityContextHolderFilter@1943abdf, org.springframework.security.web.header.HeaderWriterFilter@1d7e999c, org.springframework.security.web.authentication.logout.LogoutFilter@3e33429f, tfc.gestorRestaurante.security.JwtAuthenticationFilter@46be7a8f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@43414941, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2a1a8acc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@382e287f, org.springframework.security.web.session.SessionManagementFilter@2a475ced, org.springframework.security.web.access.ExceptionTranslationFilter@5c50c10f, org.springframework.security.web.access.intercept.AuthorizationFilter@943a791]
2024-05-10 20:17:59.434 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 20:17:59.454 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 20:17:59.458 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 2.166 seconds (process running for 513.053)
2024-05-10 20:17:59.460 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener.onApplicationEvent - Condition evaluation unchanged
2024-05-10 20:18:16.891 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:18:16.892 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-3 - Shutdown initiated...
2024-05-10 20:18:16.897 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-3 - Shutdown completed.
2024-05-10 20:18:21.759 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 10392 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 20:18:21.765 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 20:18:21.855 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 20:18:21.856 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 20:18:24.136 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 20:18:24.294 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 141 ms. Found 5 JPA repository interfaces.
2024-05-10 20:18:25.714 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 20:18:25.734 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 20:18:25.734 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 20:18:25.815 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 20:18:25.816 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 3959 ms
2024-05-10 20:18:26.046 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 20:18:26.206 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 20:18:26.300 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 20:18:26.363 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 20:18:26.741 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 20:18:26.792 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 20:18:26.928 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@4a511cee
2024-05-10 20:18:26.932 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 20:18:29.044 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 20:18:29.158 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:18:30.034 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 20:18:31.988 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@40c92b66, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@55a02cde, org.springframework.security.web.context.SecurityContextHolderFilter@3c9774b4, org.springframework.security.web.header.HeaderWriterFilter@48df6459, org.springframework.security.web.authentication.logout.LogoutFilter@7b0c1202, tfc.gestorRestaurante.security.JwtAuthenticationFilter@55b19951, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@66d28eab, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1d407aae, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@683262ab, org.springframework.security.web.session.SessionManagementFilter@157a5309, org.springframework.security.web.access.ExceptionTranslationFilter@22201e8c, org.springframework.security.web.access.intercept.AuthorizationFilter@262e3d2]
2024-05-10 20:18:32.674 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 20:18:32.739 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 20:18:32.754 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 11.992 seconds (process running for 13.603)
2024-05-10 20:24:49.698 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:24:49.703 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 20:24:49.707 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 20:24:55.298 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 10700 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 20:24:55.303 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 20:24:55.384 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 20:24:55.385 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 20:24:57.238 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 20:24:57.372 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 120 ms. Found 5 JPA repository interfaces.
2024-05-10 20:24:58.522 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 20:24:58.541 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 20:24:58.542 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 20:24:58.622 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 20:24:58.623 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 3237 ms
2024-05-10 20:24:58.871 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 20:24:59.047 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 20:24:59.157 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 20:24:59.226 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 20:24:59.689 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 20:24:59.741 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 20:24:59.911 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@544bb262
2024-05-10 20:24:59.916 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 20:25:01.788 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 20:25:01.888 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:25:02.627 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 20:25:04.482 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@53feb392, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5cd1421c, org.springframework.security.web.context.SecurityContextHolderFilter@4b95ad95, org.springframework.security.web.header.HeaderWriterFilter@6d52f7d8, org.springframework.security.web.authentication.logout.LogoutFilter@65b337a7, tfc.gestorRestaurante.security.JwtAuthenticationFilter@104d685a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@635ed99b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3676c482, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@19e5a8b0, org.springframework.security.web.session.SessionManagementFilter@6c65fbf1, org.springframework.security.web.access.ExceptionTranslationFilter@3953aeb1, org.springframework.security.web.access.intercept.AuthorizationFilter@67fd0baa]
2024-05-10 20:25:05.268 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 20:25:05.338 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 20:25:05.353 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 11.0 seconds (process running for 12.648)
2024-05-10 20:25:21.291 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 20:25:21.291 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 20:25:21.293 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 2 ms
2024-05-10 20:26:00.047 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool.run - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m29ms255µs800ns).
2024-05-10 20:26:00.236 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 20:26:00.350 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 20:26:00.434 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:26:00.462 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:26:00.538 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:26:00.609 [http-nio-8080-exec-2] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:344), org.apache.catalina.connector.OutputBuffer.flushByteBuffer(OutputBuffer.java:773), org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:294), org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:267), org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:120), org.springframework.security.web.util.OnCommittedResponseWrapper$SaveContextServletOutputStream.flush(OnCommittedResponseWrapper.java:524), java.base/java.io.FilterOutputStream.flush(FilterOutputStream.java:155), com.fasterxml.jackson.core.json.UTF8JsonGenerator.flush(UTF8JsonGenerator.java:1200), com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1063), org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:483), org.springframework.http.converter.AbstractGenericHttpMessageConverter.write(AbstractGenericHttpMessageConverter.java:114), org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:297), org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:245), org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78), org.springframework.hateoas.server.mvc.RepresentationModelProcessorHandlerMethodReturnValueHandler.handleReturnValue(RepresentationModelProcessorHandlerMethodReturnValueHandler.java:108), org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 20:26:00.623 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='java.nio.channels.ClosedChannelException', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 20:26:00.651 [http-nio-8080-exec-2] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:344), org.apache.catalina.connector.OutputBuffer.flushByteBuffer(OutputBuffer.java:773), org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:294), org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:267), org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:120), org.springframework.security.web.util.OnCommittedResponseWrapper$SaveContextServletOutputStream.flush(OnCommittedResponseWrapper.java:524), java.base/java.io.FilterOutputStream.flush(FilterOutputStream.java:155), com.fasterxml.jackson.core.json.UTF8JsonGenerator.flush(UTF8JsonGenerator.java:1200), com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1063), org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:483), org.springframework.http.converter.AbstractGenericHttpMessageConverter.write(AbstractGenericHttpMessageConverter.java:114), org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:297), org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:245), org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78), org.springframework.hateoas.server.mvc.RepresentationModelProcessorHandlerMethodReturnValueHandler.handleReturnValue(RepresentationModelProcessorHandlerMethodReturnValueHandler.java:108), org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 20:26:00.652 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='java.nio.channels.ClosedChannelException', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 20:26:00.666 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:26:00.673 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 20:26:00.682 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 20:26:04.315 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 13956 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 20:26:04.319 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 20:26:04.402 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 20:26:04.402 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 20:26:06.165 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 20:26:06.284 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 104 ms. Found 5 JPA repository interfaces.
2024-05-10 20:26:07.471 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 20:26:07.488 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 20:26:07.489 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 20:26:07.569 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 20:26:07.570 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 3167 ms
2024-05-10 20:26:07.802 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 20:26:07.967 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 20:26:08.064 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 20:26:08.125 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 20:26:08.701 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 20:26:08.768 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 20:26:08.978 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@57cdf5ca
2024-05-10 20:26:08.984 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 20:26:11.521 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 20:26:11.646 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:26:12.543 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 20:26:14.343 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@26101838, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3c952ee9, org.springframework.security.web.context.SecurityContextHolderFilter@4342264d, org.springframework.security.web.header.HeaderWriterFilter@4de95d5, org.springframework.security.web.authentication.logout.LogoutFilter@1192d85e, tfc.gestorRestaurante.security.JwtAuthenticationFilter@24317ad5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7252e40e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7c3f216d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6469703e, org.springframework.security.web.session.SessionManagementFilter@390cd940, org.springframework.security.web.access.ExceptionTranslationFilter@3aa13fe2, org.springframework.security.web.access.intercept.AuthorizationFilter@2cf6dd3e]
2024-05-10 20:26:15.063 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 20:26:15.132 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 20:26:15.145 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 11.761 seconds (process running for 13.243)
2024-05-10 20:26:17.014 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 20:26:17.015 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 20:26:17.017 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 2 ms
2024-05-10 20:27:08.552 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool.run - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=59s463ms795µs400ns).
2024-05-10 20:27:09.153 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 20:27:09.399 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 20:27:09.440 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:27:09.510 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:28:19.403 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool.run - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m10s851ms193µs300ns).
2024-05-10 20:30:15.801 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool.run - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m56s395ms131µs400ns).
2024-05-10 20:31:03.173 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool.run - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=47s374ms568µs500ns).
2024-05-10 20:32:04.245 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool.run - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m1s71ms973µs900ns).
2024-05-10 20:32:04.276 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:32:04.417 [http-nio-8080-exec-2] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:344), org.apache.catalina.connector.OutputBuffer.flushByteBuffer(OutputBuffer.java:773), org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:294), org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:267), org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:120), org.springframework.security.web.util.OnCommittedResponseWrapper$SaveContextServletOutputStream.flush(OnCommittedResponseWrapper.java:524), java.base/java.io.FilterOutputStream.flush(FilterOutputStream.java:155), com.fasterxml.jackson.core.json.UTF8JsonGenerator.flush(UTF8JsonGenerator.java:1200), com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1063), org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:483), org.springframework.http.converter.AbstractGenericHttpMessageConverter.write(AbstractGenericHttpMessageConverter.java:114), org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:297), org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:245), org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78), org.springframework.hateoas.server.mvc.RepresentationModelProcessorHandlerMethodReturnValueHandler.handleReturnValue(RepresentationModelProcessorHandlerMethodReturnValueHandler.java:108), org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 20:32:04.437 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='java.nio.channels.ClosedChannelException', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 20:32:04.471 [http-nio-8080-exec-2] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:344), org.apache.catalina.connector.OutputBuffer.flushByteBuffer(OutputBuffer.java:773), org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:294), org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:267), org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:120), org.springframework.security.web.util.OnCommittedResponseWrapper$SaveContextServletOutputStream.flush(OnCommittedResponseWrapper.java:524), java.base/java.io.FilterOutputStream.flush(FilterOutputStream.java:155), com.fasterxml.jackson.core.json.UTF8JsonGenerator.flush(UTF8JsonGenerator.java:1200), com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1063), org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:483), org.springframework.http.converter.AbstractGenericHttpMessageConverter.write(AbstractGenericHttpMessageConverter.java:114), org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:297), org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:245), org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78), org.springframework.hateoas.server.mvc.RepresentationModelProcessorHandlerMethodReturnValueHandler.handleReturnValue(RepresentationModelProcessorHandlerMethodReturnValueHandler.java:108), org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 20:32:04.472 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='java.nio.channels.ClosedChannelException', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 20:32:04.490 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:32:04.498 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 20:32:04.504 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 20:33:29.593 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 12632 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 20:33:29.596 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 20:33:29.663 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 20:33:29.663 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 20:33:31.241 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 20:33:31.359 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 106 ms. Found 5 JPA repository interfaces.
2024-05-10 20:33:32.455 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 20:33:32.474 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 20:33:32.475 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 20:33:32.552 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 20:33:32.553 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 2888 ms
2024-05-10 20:33:32.786 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 20:33:32.957 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 20:33:33.047 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 20:33:33.105 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 20:33:33.481 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 20:33:33.522 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 20:33:33.662 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@795bdafc
2024-05-10 20:33:33.666 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 20:33:35.443 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 20:33:35.539 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:33:36.377 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 20:33:38.142 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2d1734de, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1112bc30, org.springframework.security.web.context.SecurityContextHolderFilter@6b42b73c, org.springframework.security.web.header.HeaderWriterFilter@32da028b, org.springframework.security.web.authentication.logout.LogoutFilter@5536d6eb, tfc.gestorRestaurante.security.JwtAuthenticationFilter@6ce2ee2a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@a75a343, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@356253db, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@58685c27, org.springframework.security.web.session.SessionManagementFilter@557ecb08, org.springframework.security.web.access.ExceptionTranslationFilter@392991b2, org.springframework.security.web.access.intercept.AuthorizationFilter@4f9e74f8]
2024-05-10 20:33:38.804 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 20:33:38.868 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 20:33:38.883 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 10.168 seconds (process running for 11.595)
2024-05-10 20:33:47.217 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 20:33:47.219 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 20:33:47.221 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 2 ms
2024-05-10 20:33:51.681 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 20:33:51.950 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 20:33:51.994 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:33:52.065 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:34:16.077 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:35:45.882 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:35:45.888 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 20:35:45.893 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 20:35:54.102 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 13584 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 20:35:54.106 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 20:35:54.192 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 20:35:54.195 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 20:35:56.106 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 20:35:56.258 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 135 ms. Found 5 JPA repository interfaces.
2024-05-10 20:35:57.533 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 20:35:57.555 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 20:35:57.555 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 20:35:57.637 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 20:35:57.637 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 3440 ms
2024-05-10 20:35:57.887 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 20:35:58.056 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 20:35:58.160 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 20:35:58.227 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 20:35:58.653 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 20:35:58.701 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 20:35:58.856 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@62a5c1fa
2024-05-10 20:35:58.861 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 20:36:00.768 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 20:36:00.869 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:36:01.811 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 20:36:03.943 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@74d66562, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@266e1540, org.springframework.security.web.context.SecurityContextHolderFilter@10312094, org.springframework.security.web.header.HeaderWriterFilter@1ebfde25, org.springframework.security.web.authentication.logout.LogoutFilter@44d8f864, tfc.gestorRestaurante.security.JwtAuthenticationFilter@14a95d93, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@561c3fb1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@14d80b97, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@335ae757, org.springframework.security.web.session.SessionManagementFilter@3bb88e82, org.springframework.security.web.access.ExceptionTranslationFilter@71ede3cb, org.springframework.security.web.access.intercept.AuthorizationFilter@d4bf42c]
2024-05-10 20:36:04.676 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 20:36:04.739 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 20:36:04.753 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 11.693 seconds (process running for 13.341)
2024-05-10 20:36:10.463 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 20:36:10.463 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 20:36:10.466 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 2 ms
2024-05-10 20:36:25.432 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 20:36:25.686 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 20:36:25.730 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:36:25.739 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:43:11.027 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool.run - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=6m33s301ms864µs700ns).
2024-05-10 20:43:11.039 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:43:11.159 [http-nio-8080-exec-1] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:344), org.apache.catalina.connector.OutputBuffer.flushByteBuffer(OutputBuffer.java:773), org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:294), org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:267), org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:120), org.springframework.security.web.util.OnCommittedResponseWrapper$SaveContextServletOutputStream.flush(OnCommittedResponseWrapper.java:524), java.base/java.io.FilterOutputStream.flush(FilterOutputStream.java:155), com.fasterxml.jackson.core.json.UTF8JsonGenerator.flush(UTF8JsonGenerator.java:1200), com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1063), org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:483), org.springframework.http.converter.AbstractGenericHttpMessageConverter.write(AbstractGenericHttpMessageConverter.java:114), org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:297), org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:245), org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78), org.springframework.hateoas.server.mvc.RepresentationModelProcessorHandlerMethodReturnValueHandler.handleReturnValue(RepresentationModelProcessorHandlerMethodReturnValueHandler.java:108), org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 20:43:11.185 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='java.nio.channels.ClosedChannelException', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 20:43:11.217 [http-nio-8080-exec-1] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:344), org.apache.catalina.connector.OutputBuffer.flushByteBuffer(OutputBuffer.java:773), org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:294), org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:267), org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:120), org.springframework.security.web.util.OnCommittedResponseWrapper$SaveContextServletOutputStream.flush(OnCommittedResponseWrapper.java:524), java.base/java.io.FilterOutputStream.flush(FilterOutputStream.java:155), com.fasterxml.jackson.core.json.UTF8JsonGenerator.flush(UTF8JsonGenerator.java:1200), com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1063), org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:483), org.springframework.http.converter.AbstractGenericHttpMessageConverter.write(AbstractGenericHttpMessageConverter.java:114), org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:297), org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:245), org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78), org.springframework.hateoas.server.mvc.RepresentationModelProcessorHandlerMethodReturnValueHandler.handleReturnValue(RepresentationModelProcessorHandlerMethodReturnValueHandler.java:108), org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 20:43:11.218 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='java.nio.channels.ClosedChannelException', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 20:43:11.236 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:43:11.245 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 20:43:11.251 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 20:43:16.594 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 11632 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 20:43:16.597 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 20:43:16.684 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 20:43:16.685 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 20:43:18.709 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 20:43:18.846 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 124 ms. Found 5 JPA repository interfaces.
2024-05-10 20:43:19.926 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 20:43:19.943 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 20:43:19.943 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 20:43:20.027 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 20:43:20.027 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 3341 ms
2024-05-10 20:43:20.241 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 20:43:20.397 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 20:43:20.474 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 20:43:20.525 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 20:43:20.916 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 20:43:20.981 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 20:43:21.154 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@5f114234
2024-05-10 20:43:21.158 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 20:43:23.124 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 20:43:23.263 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:43:24.143 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 20:43:26.504 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1878b38a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6e9cc478, org.springframework.security.web.context.SecurityContextHolderFilter@7c01f3b2, org.springframework.security.web.header.HeaderWriterFilter@2509bbc, org.springframework.security.web.authentication.logout.LogoutFilter@296eccc2, tfc.gestorRestaurante.security.JwtAuthenticationFilter@3f8657a7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@69072fcb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@838c359, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1d56c34c, org.springframework.security.web.session.SessionManagementFilter@681af6e4, org.springframework.security.web.access.ExceptionTranslationFilter@70b214e3, org.springframework.security.web.access.intercept.AuthorizationFilter@47662e8b]
2024-05-10 20:43:27.312 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 20:43:27.402 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 20:43:27.414 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 11.949 seconds (process running for 13.541)
2024-05-10 20:43:34.016 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 20:43:34.018 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 20:43:34.020 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 2 ms
2024-05-10 20:43:34.390 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 20:43:34.468 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 20:43:34.484 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:43:34.525 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:45:40.327 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-05-10 20:45:40.346 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:45:40.353 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 20:45:40.360 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 20:45:40.561 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 11632 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 20:45:40.563 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 20:45:41.487 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 20:45:41.554 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 66 ms. Found 5 JPA repository interfaces.
2024-05-10 20:45:41.945 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 20:45:41.946 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 20:45:41.948 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 20:45:41.980 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 20:45:41.980 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 1401 ms
2024-05-10 20:45:42.064 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 20:45:42.137 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 20:45:42.141 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 20:45:42.147 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 20:45:42.149 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Starting...
2024-05-10 20:45:42.158 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-2 - Added connection org.mariadb.jdbc.Connection@550c9b3a
2024-05-10 20:45:42.159 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Start completed.
2024-05-10 20:45:42.463 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 20:45:42.513 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:45:43.484 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@232ad5ea, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1f57a1d3, org.springframework.security.web.context.SecurityContextHolderFilter@3c3d101, org.springframework.security.web.header.HeaderWriterFilter@5fa86d85, org.springframework.security.web.authentication.logout.LogoutFilter@6e8a596d, tfc.gestorRestaurante.security.JwtAuthenticationFilter@68ffa193, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@494b3766, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5593af8f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@34081daf, org.springframework.security.web.session.SessionManagementFilter@30a2c96a, org.springframework.security.web.access.ExceptionTranslationFilter@71a77cbb, org.springframework.security.web.access.intercept.AuthorizationFilter@364d8458]
2024-05-10 20:45:43.839 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 20:45:43.859 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 20:45:43.866 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 3.399 seconds (process running for 149.992)
2024-05-10 20:45:43.870 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener.onApplicationEvent - Condition evaluation unchanged
2024-05-10 20:45:45.282 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2024-05-10 20:45:45.290 [Thread-7] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:45:45.291 [Thread-7] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown initiated...
2024-05-10 20:45:45.293 [Thread-7] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown completed.
2024-05-10 20:45:45.454 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 11632 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 20:45:45.455 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 20:45:46.357 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 20:45:46.402 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 45 ms. Found 5 JPA repository interfaces.
2024-05-10 20:45:46.666 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 20:45:46.667 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 20:45:46.668 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 20:45:46.688 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 20:45:46.688 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 1229 ms
2024-05-10 20:45:46.763 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 20:45:46.822 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 20:45:46.825 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 20:45:46.832 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 20:45:46.833 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-3 - Starting...
2024-05-10 20:45:46.838 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-3 - Added connection org.mariadb.jdbc.Connection@1b167cc6
2024-05-10 20:45:46.839 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-3 - Start completed.
2024-05-10 20:45:47.113 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 20:45:47.154 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:45:47.904 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@64409c14, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@9d13376, org.springframework.security.web.context.SecurityContextHolderFilter@53ab65ba, org.springframework.security.web.header.HeaderWriterFilter@329eba78, org.springframework.security.web.authentication.logout.LogoutFilter@66c167a5, tfc.gestorRestaurante.security.JwtAuthenticationFilter@3de25f5f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@35083c15, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@72020db6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@73c93747, org.springframework.security.web.session.SessionManagementFilter@730deb9e, org.springframework.security.web.access.ExceptionTranslationFilter@7973e6dc, org.springframework.security.web.access.intercept.AuthorizationFilter@7050c7bc]
2024-05-10 20:45:48.248 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 20:45:48.272 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 20:45:48.279 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 2.897 seconds (process running for 154.405)
2024-05-10 20:45:48.285 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener.onApplicationEvent - Condition evaluation unchanged
2024-05-10 20:46:10.752 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 20:46:10.753 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 20:46:10.757 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 4 ms
2024-05-10 20:46:10.796 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 20:46:10.803 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 20:46:10.806 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:46:10.821 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:49:28.299 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 20:49:28.303 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 20:49:28.307 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:49:28.313 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:49:29.004 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-05-10 20:49:29.014 [Thread-11] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:49:29.016 [Thread-11] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-3 - Shutdown initiated...
2024-05-10 20:49:29.020 [Thread-11] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-3 - Shutdown completed.
2024-05-10 20:49:29.158 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 11632 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 20:49:29.159 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 20:49:29.911 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 20:49:29.957 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 45 ms. Found 5 JPA repository interfaces.
2024-05-10 20:49:30.356 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 20:49:30.357 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 20:49:30.358 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 20:49:30.390 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 20:49:30.390 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 1227 ms
2024-05-10 20:49:30.499 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 20:49:30.582 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 20:49:30.588 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 20:49:30.619 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 20:49:30.622 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-4 - Starting...
2024-05-10 20:49:30.628 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-4 - Added connection org.mariadb.jdbc.Connection@4e978ce0
2024-05-10 20:49:30.629 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-4 - Start completed.
2024-05-10 20:49:30.924 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 20:49:30.964 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:49:32.205 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@14784662, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4184f73e, org.springframework.security.web.context.SecurityContextHolderFilter@67207f2f, org.springframework.security.web.header.HeaderWriterFilter@4c560da7, org.springframework.security.web.authentication.logout.LogoutFilter@f3b4259, tfc.gestorRestaurante.security.JwtAuthenticationFilter@6d23470, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@65ca0852, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@190d0a79, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@49911189, org.springframework.security.web.session.SessionManagementFilter@57f4b1a8, org.springframework.security.web.access.ExceptionTranslationFilter@4f0c30a, org.springframework.security.web.access.intercept.AuthorizationFilter@4b29c89f]
2024-05-10 20:49:32.674 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 20:49:32.704 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 20:49:32.709 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 3.607 seconds (process running for 378.835)
2024-05-10 20:49:32.712 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener.onApplicationEvent - Condition evaluation unchanged
2024-05-10 20:49:34.114 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2024-05-10 20:49:34.122 [Thread-15] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:49:34.123 [Thread-15] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-4 - Shutdown initiated...
2024-05-10 20:49:34.125 [Thread-15] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-4 - Shutdown completed.
2024-05-10 20:49:34.234 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 11632 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 20:49:34.235 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 20:49:34.645 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 20:49:34.679 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 33 ms. Found 5 JPA repository interfaces.
2024-05-10 20:49:34.890 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 20:49:34.891 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 20:49:34.891 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 20:49:34.912 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 20:49:34.912 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 675 ms
2024-05-10 20:49:34.985 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 20:49:35.039 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 20:49:35.043 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 20:49:35.048 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 20:49:35.049 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-5 - Starting...
2024-05-10 20:49:35.054 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-5 - Added connection org.mariadb.jdbc.Connection@2b08548c
2024-05-10 20:49:35.054 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-5 - Start completed.
2024-05-10 20:49:35.263 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 20:49:35.290 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:49:35.919 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@65c18ee0, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@514ddebe, org.springframework.security.web.context.SecurityContextHolderFilter@582a8309, org.springframework.security.web.header.HeaderWriterFilter@10a6a587, org.springframework.security.web.authentication.logout.LogoutFilter@77986412, tfc.gestorRestaurante.security.JwtAuthenticationFilter@7cf5ac2d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f49af9f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4ae6a56c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7cae5aee, org.springframework.security.web.session.SessionManagementFilter@4d4f87db, org.springframework.security.web.access.ExceptionTranslationFilter@684be3f0, org.springframework.security.web.access.intercept.AuthorizationFilter@2a3d1a21]
2024-05-10 20:49:36.215 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 20:49:36.237 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 20:49:36.241 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 2.043 seconds (process running for 382.367)
2024-05-10 20:49:36.243 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener.onApplicationEvent - Condition evaluation unchanged
2024-05-10 20:49:45.344 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 20:49:45.344 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 20:49:45.350 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 5 ms
2024-05-10 20:49:45.479 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 20:49:45.489 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 20:49:45.492 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:51:46.857 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-05-10 20:51:46.866 [Thread-19] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:51:46.867 [Thread-19] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-5 - Shutdown initiated...
2024-05-10 20:51:46.873 [Thread-19] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-5 - Shutdown completed.
2024-05-10 20:51:47.033 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 11632 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 20:51:47.033 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 20:51:47.741 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 20:51:47.805 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 62 ms. Found 5 JPA repository interfaces.
2024-05-10 20:51:48.174 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 20:51:48.175 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 20:51:48.176 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 20:51:48.204 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 20:51:48.204 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 1168 ms
2024-05-10 20:51:48.323 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 20:51:48.401 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 20:51:48.405 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 20:51:48.412 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 20:51:48.413 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-6 - Starting...
2024-05-10 20:51:48.421 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-6 - Added connection org.mariadb.jdbc.Connection@6d6b3178
2024-05-10 20:51:48.422 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-6 - Start completed.
2024-05-10 20:51:48.659 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 20:51:48.699 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:51:49.552 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@cdb54b5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@fb843c2, org.springframework.security.web.context.SecurityContextHolderFilter@379e1cea, org.springframework.security.web.header.HeaderWriterFilter@6c6e0c4c, org.springframework.security.web.authentication.logout.LogoutFilter@2654a69a, tfc.gestorRestaurante.security.JwtAuthenticationFilter@c0cddbc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@26aff17e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3a3f858b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3c9bbdf5, org.springframework.security.web.session.SessionManagementFilter@7814735e, org.springframework.security.web.access.ExceptionTranslationFilter@78fd3bbc, org.springframework.security.web.access.intercept.AuthorizationFilter@397c568c]
2024-05-10 20:51:50.004 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 20:51:50.029 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 20:51:50.041 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 3.081 seconds (process running for 516.168)
2024-05-10 20:51:50.043 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener.onApplicationEvent - Condition evaluation unchanged
2024-05-10 20:51:51.438 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2024-05-10 20:51:51.445 [Thread-23] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:51:51.446 [Thread-23] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-6 - Shutdown initiated...
2024-05-10 20:51:51.450 [Thread-23] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-6 - Shutdown completed.
2024-05-10 20:51:51.584 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 11632 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 20:51:51.584 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 20:51:52.169 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 20:51:52.217 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 46 ms. Found 5 JPA repository interfaces.
2024-05-10 20:51:52.510 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 20:51:52.511 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 20:51:52.512 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 20:51:52.531 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 20:51:52.531 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 944 ms
2024-05-10 20:51:52.606 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 20:51:52.653 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 20:51:52.655 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 20:51:52.661 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 20:51:52.662 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-7 - Starting...
2024-05-10 20:51:52.667 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-7 - Added connection org.mariadb.jdbc.Connection@75e66c23
2024-05-10 20:51:52.668 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-7 - Start completed.
2024-05-10 20:51:52.854 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 20:51:52.893 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 20:51:53.590 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@dcb1a7c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@45203ca8, org.springframework.security.web.context.SecurityContextHolderFilter@3c6cecd6, org.springframework.security.web.header.HeaderWriterFilter@3edd61a9, org.springframework.security.web.authentication.logout.LogoutFilter@6ec4cce9, tfc.gestorRestaurante.security.JwtAuthenticationFilter@163e9dab, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@565de8a6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3580bed, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3ab0a23a, org.springframework.security.web.session.SessionManagementFilter@635ab43b, org.springframework.security.web.access.ExceptionTranslationFilter@3d5af025, org.springframework.security.web.access.intercept.AuthorizationFilter@14216f3d]
2024-05-10 20:51:53.875 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 20:51:53.895 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 20:51:53.901 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 2.368 seconds (process running for 520.027)
2024-05-10 20:51:53.903 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener.onApplicationEvent - Condition evaluation unchanged
2024-05-10 20:51:59.839 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 20:51:59.839 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 20:51:59.842 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 3 ms
2024-05-10 20:51:59.873 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 20:51:59.879 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 20:51:59.882 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 20:54:33.281 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 20:54:33.286 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 20:54:33.288 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 21:06:10.156 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 21:06:10.157 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-7 - Shutdown initiated...
2024-05-10 21:06:10.159 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-7 - Shutdown completed.
2024-05-10 21:06:20.262 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 15836 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 21:06:20.265 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 21:06:20.324 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 21:06:20.324 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 21:06:21.843 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 21:06:21.977 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 122 ms. Found 5 JPA repository interfaces.
2024-05-10 21:06:23.059 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 21:06:23.080 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 21:06:23.081 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 21:06:23.153 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 21:06:23.153 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 2828 ms
2024-05-10 21:06:23.358 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 21:06:23.517 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 21:06:23.596 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 21:06:23.639 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 21:06:23.945 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 21:06:23.987 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 21:06:24.097 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@401d75a4
2024-05-10 21:06:24.101 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 21:06:25.647 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 21:06:25.731 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 21:06:26.434 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 21:06:27.994 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@598af452, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@28745716, org.springframework.security.web.context.SecurityContextHolderFilter@741f0307, org.springframework.security.web.header.HeaderWriterFilter@5179bf17, org.springframework.security.web.authentication.logout.LogoutFilter@72946a90, tfc.gestorRestaurante.security.JwtAuthenticationFilter@7c922004, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4e74d068, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5ad1792e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5260eff8, org.springframework.security.web.session.SessionManagementFilter@2c41a915, org.springframework.security.web.access.ExceptionTranslationFilter@52bc67ee, org.springframework.security.web.access.intercept.AuthorizationFilter@5c35b752]
2024-05-10 21:06:28.670 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 21:06:28.730 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 21:06:28.743 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 9.41 seconds (process running for 10.674)
2024-05-10 21:06:32.596 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 21:06:32.597 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 21:06:32.599 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 2 ms
2024-05-10 21:06:32.892 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 21:06:32.945 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 21:06:32.969 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 21:06:32.976 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 21:06:32.995 [http-nio-8080-exec-2] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:368), org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:246), org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565), org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794), org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757), org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669), org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419), org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717), tfc.gestorRestaurante.models.services.Pedido.PedidoService$$SpringCGLIB$$0.createPedido(<generated>), tfc.gestorRestaurante.controllers.GestorRestauranteController.createPedido(GestorRestauranteController.java:69), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 21:06:33.010 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='org.hibernate.TransientPropertyValueException: object references an unsaved transient instance - save the transient instance before flushing : tfc.gestorRestaurante.models.entity.DetallePedido.pedido -> tfc.gestorRestaurante.models.entity.Pedido', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 21:06:33.057 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.TransientPropertyValueException: object references an unsaved transient instance - save the transient instance before flushing : tfc.gestorRestaurante.models.entity.DetallePedido.pedido -> tfc.gestorRestaurante.models.entity.Pedido]
2024-05-10 21:08:32.233 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 21:08:32.240 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 21:08:32.247 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 21:08:39.654 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 4752 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 21:08:39.657 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 21:08:39.713 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 21:08:39.714 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 21:08:41.102 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 21:08:41.215 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 102 ms. Found 5 JPA repository interfaces.
2024-05-10 21:08:42.153 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 21:08:42.184 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 21:08:42.185 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 21:08:42.257 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 21:08:42.258 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 2544 ms
2024-05-10 21:08:42.461 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 21:08:42.609 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 21:08:42.675 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 21:08:42.722 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 21:08:43.018 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 21:08:43.055 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 21:08:43.167 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@5383c9a3
2024-05-10 21:08:43.174 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 21:08:43.541 [restartedMain] ERROR o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Failed to initialize JPA EntityManagerFactory: Collection 'tfc.gestorRestaurante.models.entity.Pedido.detallesPedido' is 'mappedBy' a property named 'pedido' which does not exist in the target entity 'tfc.gestorRestaurante.models.entity.DetallePedido'
2024-05-10 21:08:43.543 [restartedMain] ERROR o.s.b.w.e.tomcat.TomcatStarter.onStartup - Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'jwtAuthenticationFilter': Unsatisfied dependency expressed through field 'handlerExceptionResolver': Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'openEntityManagerInViewInterceptorConfigurer' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Unsatisfied dependency expressed through method 'openEntityManagerInViewInterceptorConfigurer' parameter 0: Error creating bean with name 'openEntityManagerInViewInterceptor' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Collection 'tfc.gestorRestaurante.models.entity.Pedido.detallesPedido' is 'mappedBy' a property named 'pedido' which does not exist in the target entity 'tfc.gestorRestaurante.models.entity.DetallePedido'
2024-05-10 21:08:43.588 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Stopping service [Tomcat]
2024-05-10 21:08:43.592 [restartedMain] WARN  o.a.c.loader.WebappClassLoaderBase.log - The web application [ROOT] appears to have started a thread named [HikariPool-1 housekeeper] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/jdk.internal.misc.Unsafe.park(Native Method)
 java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:269)
 java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1758)
 java.base/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1182)
 java.base/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:899)
 java.base/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1070)
 java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
 java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
 java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-10 21:08:43.592 [restartedMain] WARN  o.a.c.loader.WebappClassLoaderBase.log - The web application [ROOT] appears to have started a thread named [HikariPool-1 connection adder] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/jdk.internal.misc.Unsafe.park(Native Method)
 java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:269)
 java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1758)
 java.base/java.util.concurrent.LinkedBlockingQueue.poll(LinkedBlockingQueue.java:460)
 java.base/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1069)
 java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
 java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
 java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-10 21:08:43.594 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext.refresh - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server
2024-05-10 21:08:43.597 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 21:08:43.602 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 21:08:43.612 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger.logMessage - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-10 21:08:43.638 [restartedMain] ERROR o.s.boot.SpringApplication.reportFailure - Application run failed
org.springframework.context.ApplicationContextException: Unable to start web server
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:165)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:618)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at tfc.gestorRestaurante.GestorRestauranteApplication.main(GestorRestauranteApplication.java:21)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:145)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:105)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:499)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:218)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	... 11 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jwtAuthenticationFilter': Unsatisfied dependency expressed through field 'handlerExceptionResolver': Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'openEntityManagerInViewInterceptorConfigurer' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Unsatisfied dependency expressed through method 'openEntityManagerInViewInterceptorConfigurer' parameter 0: Error creating bean with name 'openEntityManagerInViewInterceptor' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Collection 'tfc.gestorRestaurante.models.entity.Pedido.detallesPedido' is 'mappedBy' a property named 'pedido' which does not exist in the target entity 'tfc.gestorRestaurante.models.entity.DetallePedido'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:210)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:173)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:168)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:153)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:86)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:266)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:240)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:52)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4866)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:845)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:240)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:921)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:126)
	... 16 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'openEntityManagerInViewInterceptorConfigurer' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Unsatisfied dependency expressed through method 'openEntityManagerInViewInterceptorConfigurer' parameter 0: Error creating bean with name 'openEntityManagerInViewInterceptor' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Collection 'tfc.gestorRestaurante.models.entity.Pedido.detallesPedido' is 'mappedBy' a property named 'pedido' which does not exist in the target entity 'tfc.gestorRestaurante.models.entity.DetallePedido'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:895)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:848)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:409)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784)
	... 58 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'openEntityManagerInViewInterceptorConfigurer' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Unsatisfied dependency expressed through method 'openEntityManagerInViewInterceptorConfigurer' parameter 0: Error creating bean with name 'openEntityManagerInViewInterceptor' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Collection 'tfc.gestorRestaurante.models.entity.Pedido.detallesPedido' is 'mappedBy' a property named 'pedido' which does not exist in the target entity 'tfc.gestorRestaurante.models.entity.DetallePedido'
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:542)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1689)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1653)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeanCollection(DefaultListableBeanFactory.java:1543)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1511)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1392)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:887)
	... 81 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'openEntityManagerInViewInterceptor' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Collection 'tfc.gestorRestaurante.models.entity.Pedido.detallesPedido' is 'mappedBy' a property named 'pedido' which does not exist in the target entity 'tfc.gestorRestaurante.models.entity.DetallePedido'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 98 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Collection 'tfc.gestorRestaurante.models.entity.Pedido.detallesPedido' is 'mappedBy' a property named 'pedido' which does not exist in the target entity 'tfc.gestorRestaurante.models.entity.DetallePedido'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:224)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1323)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1284)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:486)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:334)
	at org.springframework.orm.jpa.EntityManagerFactoryUtils.findEntityManagerFactory(EntityManagerFactoryUtils.java:120)
	at org.springframework.orm.jpa.EntityManagerFactoryAccessor.setBeanFactory(EntityManagerFactoryAccessor.java:153)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1807)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1774)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	... 108 common frames omitted
Caused by: org.hibernate.AnnotationException: Collection 'tfc.gestorRestaurante.models.entity.Pedido.detallesPedido' is 'mappedBy' a property named 'pedido' which does not exist in the target entity 'tfc.gestorRestaurante.models.entity.DetallePedido'
	at org.hibernate.boot.model.internal.CollectionBinder.isReversePropertyInJoin(CollectionBinder.java:1622)
	at org.hibernate.boot.model.internal.CollectionBinder.noAssociationTable(CollectionBinder.java:1636)
	at org.hibernate.boot.model.internal.CollectionBinder.bindStarToManySecondPass(CollectionBinder.java:1597)
	at org.hibernate.boot.model.internal.CollectionBinder$1.secondPass(CollectionBinder.java:1588)
	at org.hibernate.boot.model.internal.CollectionSecondPass.doSecondPass(CollectionSecondPass.java:45)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1815)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1774)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:332)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 124 common frames omitted
2024-05-10 21:09:37.751 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 2684 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 21:09:37.757 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 21:09:37.880 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 21:09:37.883 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 21:09:40.517 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 21:09:40.627 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 98 ms. Found 5 JPA repository interfaces.
2024-05-10 21:09:41.804 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 21:09:41.822 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 21:09:41.822 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 21:09:41.916 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 21:09:41.917 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 4032 ms
2024-05-10 21:09:42.193 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 21:09:42.341 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 21:09:42.452 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 21:09:42.508 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 21:09:42.915 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 21:09:42.953 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 21:09:43.079 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@44cb0675
2024-05-10 21:09:43.083 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 21:09:44.744 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 21:09:44.844 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 21:09:45.611 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 21:09:47.593 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@27d0bfd3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@57af0daa, org.springframework.security.web.context.SecurityContextHolderFilter@1252f50d, org.springframework.security.web.header.HeaderWriterFilter@46969ba1, org.springframework.security.web.authentication.logout.LogoutFilter@20643d37, tfc.gestorRestaurante.security.JwtAuthenticationFilter@783e1fd1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4ea3d857, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2214fe99, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@34249116, org.springframework.security.web.session.SessionManagementFilter@204cc2c, org.springframework.security.web.access.ExceptionTranslationFilter@36688b96, org.springframework.security.web.access.intercept.AuthorizationFilter@634279aa]
2024-05-10 21:09:48.291 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 21:09:48.344 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 21:09:48.357 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 11.974 seconds (process running for 13.402)
2024-05-10 21:09:49.286 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 21:09:49.286 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 21:09:49.289 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 1 ms
2024-05-10 21:09:49.591 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 21:09:49.648 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 21:09:49.669 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 21:09:49.673 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 21:09:49.692 [http-nio-8080-exec-2] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:368), org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:246), org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565), org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794), org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757), org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669), org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419), org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717), tfc.gestorRestaurante.models.services.Pedido.PedidoService$$SpringCGLIB$$0.createPedido(<generated>), tfc.gestorRestaurante.controllers.GestorRestauranteController.createPedido(GestorRestauranteController.java:69), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 21:09:49.705 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='org.hibernate.TransientPropertyValueException: object references an unsaved transient instance - save the transient instance before flushing : tfc.gestorRestaurante.models.entity.DetallePedido.pedido -> tfc.gestorRestaurante.models.entity.Pedido', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 21:09:49.757 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.TransientPropertyValueException: object references an unsaved transient instance - save the transient instance before flushing : tfc.gestorRestaurante.models.entity.DetallePedido.pedido -> tfc.gestorRestaurante.models.entity.Pedido]
2024-05-10 21:09:56.064 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 21:09:56.069 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 21:09:56.073 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 21:09:56.075 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 21:09:56.087 [http-nio-8080-exec-4] ERROR t.g.e.U.ControllerExceptionHandler.handleSecurityException - [org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:368), org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:246), org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565), org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794), org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757), org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669), org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419), org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119), org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184), org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765), org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717), tfc.gestorRestaurante.models.services.Pedido.PedidoService$$SpringCGLIB$$0.createPedido(<generated>), tfc.gestorRestaurante.controllers.GestorRestauranteController.createPedido(GestorRestauranteController.java:69), java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103), java.base/java.lang.reflect.Method.invoke(Method.java:580), org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:261), org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:189), org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920), org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830), org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87), org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089), org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979), org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014), org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590), org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885), jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108), org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365), org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126), org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131), org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), tfc.gestorRestaurante.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:41), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107), org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90), org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82), org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374), org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233), org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195), org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113), org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74), org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225), org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352), org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201), org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116), org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174), org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149), org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167), org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90), org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482), org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115), org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93), org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74), org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344), org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391), org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63), org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896), org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744), org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52), org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191), org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659), org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63), java.base/java.lang.Thread.run(Thread.java:1583)]
2024-05-10 21:09:56.088 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.HttpEntityMethodProcessor.handleReturnValue - public org.springframework.http.ResponseEntity<org.springframework.http.ProblemDetail> tfc.gestorRestaurante.exception.User.ControllerExceptionHandler.handleSecurityException(java.lang.Exception) returned ResponseEntity: <500 INTERNAL_SERVER_ERROR Internal Server Error,ProblemDetail[type='about:blank', title='Forbidden', status=403, detail='org.hibernate.TransientPropertyValueException: object references an unsaved transient instance - save the transient instance before flushing : tfc.gestorRestaurante.models.entity.DetallePedido.pedido -> tfc.gestorRestaurante.models.entity.Pedido', instance='/api/createPedido', properties='{description=Unknown internal server error.}'],[]>, but its status doesn't match the ProblemDetail status: 403
2024-05-10 21:09:56.089 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.logException - Resolved [org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.TransientPropertyValueException: object references an unsaved transient instance - save the transient instance before flushing : tfc.gestorRestaurante.models.entity.DetallePedido.pedido -> tfc.gestorRestaurante.models.entity.Pedido]
2024-05-10 21:10:16.916 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 21:10:16.923 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 21:10:16.928 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 21:10:23.306 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 17344 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 21:10:23.310 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 21:10:23.371 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 21:10:23.371 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 21:10:24.736 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 21:10:24.846 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 97 ms. Found 5 JPA repository interfaces.
2024-05-10 21:10:25.729 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 21:10:25.748 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 21:10:25.749 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 21:10:25.825 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 21:10:25.826 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 2455 ms
2024-05-10 21:10:26.022 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 21:10:26.155 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 21:10:26.224 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 21:10:26.271 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 21:10:26.556 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 21:10:26.602 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 21:10:26.706 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@3d0c3081
2024-05-10 21:10:26.709 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 21:10:28.159 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 21:10:28.249 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 21:10:28.874 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 21:10:30.574 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4e8caae2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6e92042e, org.springframework.security.web.context.SecurityContextHolderFilter@37dd7fb5, org.springframework.security.web.header.HeaderWriterFilter@d021ca8, org.springframework.security.web.authentication.logout.LogoutFilter@675e506c, tfc.gestorRestaurante.security.JwtAuthenticationFilter@3e0986e7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ac83721, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2477b535, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@30a5f7de, org.springframework.security.web.session.SessionManagementFilter@40688c93, org.springframework.security.web.access.ExceptionTranslationFilter@4d8571b0, org.springframework.security.web.access.intercept.AuthorizationFilter@35f2b984]
2024-05-10 21:10:31.275 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 21:10:31.336 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 21:10:31.351 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 8.815 seconds (process running for 9.882)
2024-05-10 21:10:40.731 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 21:10:40.731 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 21:10:40.736 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 3 ms
2024-05-10 21:10:41.095 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 21:10:41.175 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 21:10:41.189 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 21:21:23.432 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-05-10 21:21:23.449 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 21:21:23.454 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 21:21:23.460 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 21:21:23.627 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 17344 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 21:21:23.628 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 21:21:24.204 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 21:21:24.243 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 37 ms. Found 5 JPA repository interfaces.
2024-05-10 21:21:24.541 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 21:21:24.543 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 21:21:24.544 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 21:21:24.568 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 21:21:24.568 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 935 ms
2024-05-10 21:21:24.668 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 21:21:24.731 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 21:21:24.734 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 21:21:24.739 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 21:21:24.741 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Starting...
2024-05-10 21:21:24.749 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-2 - Added connection org.mariadb.jdbc.Connection@f7a718c
2024-05-10 21:21:24.749 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Start completed.
2024-05-10 21:21:24.987 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 21:21:25.067 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 21:21:25.706 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext.refresh - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'gestorRestauranteController': Unsatisfied dependency expressed through field 'pedidoService': Error creating bean with name 'pedidoService' defined in file [C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes\tfc\gestorRestaurante\models\services\Pedido\PedidoService.class]: Unsatisfied dependency expressed through constructor parameter 1: No qualifying bean of type 'tfc.gestorRestaurante.mappers.Pedido.PedidoMapper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2024-05-10 21:21:25.708 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 21:21:25.709 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown initiated...
2024-05-10 21:21:25.711 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown completed.
2024-05-10 21:21:25.712 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Stopping service [Tomcat]
2024-05-10 21:21:25.717 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger.logMessage - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-10 21:21:25.741 [restartedMain] ERROR o.s.b.d.LoggingFailureAnalysisReporter.report - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 1 of constructor in tfc.gestorRestaurante.models.services.Pedido.PedidoService required a bean of type 'tfc.gestorRestaurante.mappers.Pedido.PedidoMapper' that could not be found.

The injection point has the following annotations:
	- @org.springframework.beans.factory.annotation.Autowired(required=true)


Action:

Consider defining a bean of type 'tfc.gestorRestaurante.mappers.Pedido.PedidoMapper' in your configuration.

2024-05-10 21:21:27.258 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 17344 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 21:21:27.259 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 21:21:27.913 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 21:21:27.945 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 31 ms. Found 5 JPA repository interfaces.
2024-05-10 21:21:28.209 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 21:21:28.212 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 21:21:28.212 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 21:21:28.231 [restartedMain] INFO  o.a.c.c.C.[Tomcat-1].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 21:21:28.232 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 969 ms
2024-05-10 21:21:28.326 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 21:21:28.395 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 21:21:28.399 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 21:21:28.404 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 21:21:28.407 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-3 - Starting...
2024-05-10 21:21:28.411 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-3 - Added connection org.mariadb.jdbc.Connection@43ca4a1b
2024-05-10 21:21:28.412 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-3 - Start completed.
2024-05-10 21:21:28.578 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 21:21:28.604 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 21:21:29.208 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7764650f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3ea85961, org.springframework.security.web.context.SecurityContextHolderFilter@38bbfc8c, org.springframework.security.web.header.HeaderWriterFilter@7fe0024b, org.springframework.security.web.authentication.logout.LogoutFilter@df89fb5, tfc.gestorRestaurante.security.JwtAuthenticationFilter@16c4baf3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6406b19f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1b0b050e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7823bed5, org.springframework.security.web.session.SessionManagementFilter@7991057f, org.springframework.security.web.access.ExceptionTranslationFilter@1ef8532f, org.springframework.security.web.access.intercept.AuthorizationFilter@1fc31033]
2024-05-10 21:21:29.515 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 21:21:29.536 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 21:21:29.541 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 2.342 seconds (process running for 668.072)
2024-05-10 21:21:29.544 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener.onApplicationEvent - Condition evaluation unchanged
2024-05-10 21:27:40.119 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 21:27:40.121 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-3 - Shutdown initiated...
2024-05-10 21:27:40.124 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-3 - Shutdown completed.
2024-05-10 21:27:45.516 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 17664 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 21:27:45.519 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 21:27:45.564 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 21:27:45.565 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 21:27:46.833 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 21:27:46.939 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 90 ms. Found 5 JPA repository interfaces.
2024-05-10 21:27:47.766 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 21:27:47.783 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 21:27:47.783 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 21:27:47.851 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 21:27:47.852 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 2287 ms
2024-05-10 21:27:48.015 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 21:27:48.129 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 21:27:48.203 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 21:27:48.249 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 21:27:48.541 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 21:27:48.573 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 21:27:48.703 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@155e69cc
2024-05-10 21:27:48.711 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 21:27:50.621 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 21:27:50.693 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 21:27:51.193 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 21:27:52.545 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@e4b484c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8da68f4, org.springframework.security.web.context.SecurityContextHolderFilter@5cb94454, org.springframework.security.web.header.HeaderWriterFilter@6e04bae8, org.springframework.security.web.authentication.logout.LogoutFilter@627578c1, tfc.gestorRestaurante.security.JwtAuthenticationFilter@598151b9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@436b658f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1c6e426a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@679b814, org.springframework.security.web.session.SessionManagementFilter@5e32148e, org.springframework.security.web.access.ExceptionTranslationFilter@22327435, org.springframework.security.web.access.intercept.AuthorizationFilter@ae18ec7]
2024-05-10 21:27:53.411 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 21:27:53.474 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 21:27:53.488 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 8.621 seconds (process running for 9.563)
2024-05-10 21:33:32.468 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 21:33:32.474 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 21:33:32.479 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 21:33:38.774 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 16588 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 21:33:38.778 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 21:33:38.828 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 21:33:38.828 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 21:33:39.998 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 21:33:40.079 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 74 ms. Found 5 JPA repository interfaces.
2024-05-10 21:33:40.843 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 21:33:40.857 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 21:33:40.858 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 21:33:40.919 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 21:33:40.921 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 2091 ms
2024-05-10 21:33:41.090 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 21:33:41.213 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 21:33:41.273 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 21:33:41.326 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 21:33:41.575 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 21:33:41.607 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 21:33:41.709 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@6f4c77f
2024-05-10 21:33:41.712 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 21:33:43.001 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 21:33:43.074 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 21:33:43.729 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 21:33:45.563 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2c28c5d1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@75cc4122, org.springframework.security.web.context.SecurityContextHolderFilter@5c18d5e, org.springframework.security.web.header.HeaderWriterFilter@70af08fd, org.springframework.security.web.authentication.logout.LogoutFilter@5a573a1b, tfc.gestorRestaurante.security.JwtAuthenticationFilter@163e050d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1a46bcbb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5e32148e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7f10cfb5, org.springframework.security.web.session.SessionManagementFilter@376a4ecb, org.springframework.security.web.access.ExceptionTranslationFilter@36837248, org.springframework.security.web.access.intercept.AuthorizationFilter@265ffc5a]
2024-05-10 21:33:46.129 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 21:33:46.184 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 21:33:46.194 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 8.207 seconds (process running for 9.271)
2024-05-10 21:33:53.701 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 21:33:53.701 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 21:33:53.703 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 2 ms
2024-05-10 21:33:53.969 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 21:33:54.018 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 21:33:54.028 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 21:33:54.030 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 21:36:47.184 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-05-10 21:36:47.201 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 21:36:47.207 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 21:36:47.212 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 21:36:47.355 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 16588 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 21:36:47.355 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 21:36:47.811 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 21:36:47.827 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext.refresh - Exception encountered during context initialization - cancelling refresh attempt: java.lang.TypeNotPresentException: Type tfc.gestorRestaurante.models.entity.Pedido not present
2024-05-10 21:36:47.831 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger.logMessage - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-10 21:36:47.857 [restartedMain] ERROR o.s.boot.SpringApplication.reportFailure - Application run failed
java.lang.TypeNotPresentException: Type tfc.gestorRestaurante.models.entity.Pedido not present
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.repository.ClassRepository.computeSuperInterfaces(ClassRepository.java:117)
	at java.base/sun.reflect.generics.repository.ClassRepository.getSuperInterfaces(ClassRepository.java:95)
	at java.base/java.lang.Class.getGenericInterfaces(Class.java:1296)
	at org.springframework.core.ResolvableType.getInterfaces(ResolvableType.java:517)
	at org.springframework.core.ResolvableType.as(ResolvableType.java:465)
	at org.springframework.data.util.TypeDiscoverer.getSuperTypeInformation(TypeDiscoverer.java:254)
	at org.springframework.data.util.ClassTypeInformation.getSuperTypeInformation(ClassTypeInformation.java:36)
	at org.springframework.data.util.TypeInformation.getRequiredSuperTypeInformation(TypeInformation.java:327)
	at org.springframework.data.repository.core.support.DefaultRepositoryMetadata.<init>(DefaultRepositoryMetadata.java:55)
	at org.springframework.data.repository.core.support.AbstractRepositoryMetadata.getMetadata(AbstractRepositoryMetadata.java:77)
	at org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport.getRepositoryConfigurations(RepositoryConfigurationExtensionSupport.java:91)
	at org.springframework.data.repository.config.RepositoryConfigurationDelegate.registerRepositoriesIn(RepositoryConfigurationDelegate.java:164)
	at org.springframework.boot.autoconfigure.data.AbstractRepositoryConfigurationSourceSupport.registerBeanDefinitions(AbstractRepositoryConfigurationSourceSupport.java:62)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.lambda$loadBeanDefinitionsFromRegistrars$1(ConfigurationClassBeanDefinitionReader.java:376)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:986)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromRegistrars(ConfigurationClassBeanDefinitionReader.java:375)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:148)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:120)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:428)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:289)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:349)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:118)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:788)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:606)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at tfc.gestorRestaurante.GestorRestauranteApplication.main(GestorRestauranteApplication.java:21)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.ClassNotFoundException: tfc.gestorRestaurante.models.entity.Pedido
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:534)
	at java.base/java.lang.Class.forName(Class.java:513)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:534)
	at java.base/java.lang.Class.forName(Class.java:513)
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)
	... 39 common frames omitted
2024-05-10 21:36:49.359 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 16588 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 21:36:49.359 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 21:36:49.838 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 21:36:49.879 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 38 ms. Found 5 JPA repository interfaces.
2024-05-10 21:36:50.177 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 21:36:50.178 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 21:36:50.179 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 21:36:50.208 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 21:36:50.209 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 848 ms
2024-05-10 21:36:50.286 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 21:36:50.323 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 21:36:50.326 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 21:36:50.331 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 21:36:50.332 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Starting...
2024-05-10 21:36:50.336 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-2 - Added connection org.mariadb.jdbc.Connection@3e708b67
2024-05-10 21:36:50.336 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-2 - Start completed.
2024-05-10 21:36:50.530 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 21:36:50.566 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 21:36:51.241 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4842945, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@26349b5b, org.springframework.security.web.context.SecurityContextHolderFilter@1eb0dfb4, org.springframework.security.web.header.HeaderWriterFilter@35f8d402, org.springframework.security.web.authentication.logout.LogoutFilter@3813403e, tfc.gestorRestaurante.security.JwtAuthenticationFilter@7c920395, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1772fc18, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@64d97230, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@11ca7fac, org.springframework.security.web.session.SessionManagementFilter@7b07fb85, org.springframework.security.web.access.ExceptionTranslationFilter@3657f381, org.springframework.security.web.access.intercept.AuthorizationFilter@176654ca]
2024-05-10 21:36:51.499 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 21:36:51.517 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 21:36:51.521 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 2.204 seconds (process running for 194.598)
2024-05-10 21:36:51.523 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener.onApplicationEvent - Condition evaluation unchanged
2024-05-10 21:37:29.948 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener.onApplicationEvent - Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-05-10 21:37:29.954 [Thread-7] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 21:37:29.955 [Thread-7] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown initiated...
2024-05-10 21:37:29.959 [Thread-7] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-2 - Shutdown completed.
2024-05-10 21:37:30.081 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 16588 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 21:37:30.082 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 21:37:30.663 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 21:37:30.688 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext.refresh - Exception encountered during context initialization - cancelling refresh attempt: java.lang.TypeNotPresentException: Type tfc.gestorRestaurante.models.entity.Pedido not present
2024-05-10 21:37:30.691 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger.logMessage - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-10 21:37:30.694 [restartedMain] ERROR o.s.boot.SpringApplication.reportFailure - Application run failed
java.lang.TypeNotPresentException: Type tfc.gestorRestaurante.models.entity.Pedido not present
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.repository.ClassRepository.computeSuperInterfaces(ClassRepository.java:117)
	at java.base/sun.reflect.generics.repository.ClassRepository.getSuperInterfaces(ClassRepository.java:95)
	at java.base/java.lang.Class.getGenericInterfaces(Class.java:1296)
	at org.springframework.core.ResolvableType.getInterfaces(ResolvableType.java:517)
	at org.springframework.core.ResolvableType.as(ResolvableType.java:465)
	at org.springframework.data.util.TypeDiscoverer.getSuperTypeInformation(TypeDiscoverer.java:254)
	at org.springframework.data.util.ClassTypeInformation.getSuperTypeInformation(ClassTypeInformation.java:36)
	at org.springframework.data.util.TypeInformation.getRequiredSuperTypeInformation(TypeInformation.java:327)
	at org.springframework.data.repository.core.support.DefaultRepositoryMetadata.<init>(DefaultRepositoryMetadata.java:55)
	at org.springframework.data.repository.core.support.AbstractRepositoryMetadata.getMetadata(AbstractRepositoryMetadata.java:77)
	at org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport.getRepositoryConfigurations(RepositoryConfigurationExtensionSupport.java:91)
	at org.springframework.data.repository.config.RepositoryConfigurationDelegate.registerRepositoriesIn(RepositoryConfigurationDelegate.java:164)
	at org.springframework.boot.autoconfigure.data.AbstractRepositoryConfigurationSourceSupport.registerBeanDefinitions(AbstractRepositoryConfigurationSourceSupport.java:62)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.lambda$loadBeanDefinitionsFromRegistrars$1(ConfigurationClassBeanDefinitionReader.java:376)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:986)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromRegistrars(ConfigurationClassBeanDefinitionReader.java:375)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:148)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:120)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:428)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:289)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:349)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:118)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:788)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:606)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at tfc.gestorRestaurante.GestorRestauranteApplication.main(GestorRestauranteApplication.java:21)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.ClassNotFoundException: tfc.gestorRestaurante.models.entity.Pedido
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:534)
	at java.base/java.lang.Class.forName(Class.java:513)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:534)
	at java.base/java.lang.Class.forName(Class.java:513)
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)
	... 39 common frames omitted
2024-05-10 21:37:45.456 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 15892 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 21:37:45.458 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 21:37:45.508 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 21:37:45.509 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 21:37:46.727 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 21:37:46.812 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 75 ms. Found 5 JPA repository interfaces.
2024-05-10 21:37:47.535 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 21:37:47.547 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 21:37:47.547 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 21:37:47.609 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 21:37:47.609 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 2099 ms
2024-05-10 21:37:47.756 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 21:37:47.887 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 21:37:47.942 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 21:37:47.991 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 21:37:48.217 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 21:37:48.244 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 21:37:48.329 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@bfa0509
2024-05-10 21:37:48.331 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 21:37:49.505 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 21:37:49.577 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 21:37:50.170 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 21:37:51.582 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@30a8464d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1986cc62, org.springframework.security.web.context.SecurityContextHolderFilter@56d8c82, org.springframework.security.web.header.HeaderWriterFilter@22541182, org.springframework.security.web.authentication.logout.LogoutFilter@5fb01baf, tfc.gestorRestaurante.security.JwtAuthenticationFilter@46b12e69, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@aabfccb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3c638173, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3031323f, org.springframework.security.web.session.SessionManagementFilter@6baf86b, org.springframework.security.web.access.ExceptionTranslationFilter@76da304b, org.springframework.security.web.access.intercept.AuthorizationFilter@591e1321]
2024-05-10 21:37:52.154 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 21:37:52.215 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 21:37:52.227 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 7.465 seconds (process running for 8.364)
2024-05-10 21:37:55.829 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 21:37:55.829 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 21:37:55.832 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 2 ms
2024-05-10 21:37:56.089 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 21:37:56.139 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 21:37:56.150 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 21:39:47.329 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 21:39:47.335 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
2024-05-10 21:39:47.343 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
2024-05-10 21:39:50.222 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarting - Starting GestorRestauranteApplication using Java 21.0.2 with PID 14236 (C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante\target\classes started by ACR in C:\Users\ACR\Desktop\TFC\AARON\SPRINGBOOT\gestorRestaurante)
2024-05-10 21:39:50.225 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStartupProfileInfo - No active profile set, falling back to 1 default profile: "default"
2024-05-10 21:39:50.293 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-05-10 21:39:50.294 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor.logTo - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-05-10 21:39:52.182 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-10 21:39:52.287 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate.registerRepositoriesIn - Finished Spring Data repository scanning in 97 ms. Found 5 JPA repository interfaces.
2024-05-10 21:39:53.192 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 8080 (http)
2024-05-10 21:39:53.213 [restartedMain] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2024-05-10 21:39:53.214 [restartedMain] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-05-10 21:39:53.284 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring embedded WebApplicationContext
2024-05-10 21:39:53.285 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 2991 ms
2024-05-10 21:39:53.452 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-10 21:39:53.576 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-10 21:39:53.634 [restartedMain] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-10 21:39:53.674 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator.initiateService - HHH000026: Second-level cache disabled
2024-05-10 21:39:53.923 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo.addTransformer - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-10 21:39:53.954 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
2024-05-10 21:39:54.045 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool.checkFailFast - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@18c35ec8
2024-05-10 21:39:54.047 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
2024-05-10 21:39:55.463 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-10 21:39:55.544 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-10 21:39:56.209 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory.<clinit> - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-05-10 21:39:58.261 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7fe3d327, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2941c20a, org.springframework.security.web.context.SecurityContextHolderFilter@1172e7f, org.springframework.security.web.header.HeaderWriterFilter@5135e297, org.springframework.security.web.authentication.logout.LogoutFilter@2bf58eb1, tfc.gestorRestaurante.security.JwtAuthenticationFilter@b9b00b3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@53919bc0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6fd668e6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2b30cbe5, org.springframework.security.web.session.SessionManagementFilter@24acd94, org.springframework.security.web.access.ExceptionTranslationFilter@c901abc, org.springframework.security.web.access.intercept.AuthorizationFilter@7be5a22b]
2024-05-10 21:39:59.624 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer.startServer - LiveReload server is running on port 35729
2024-05-10 21:39:59.737 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
2024-05-10 21:39:59.763 [restartedMain] INFO  t.g.GestorRestauranteApplication.logStarted - Started GestorRestauranteApplication in 10.382 seconds (process running for 11.521)
2024-05-10 21:40:10.849 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-10 21:40:10.849 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2024-05-10 21:40:10.852 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 2 ms
2024-05-10 21:40:11.169 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`username`=?
2024-05-10 21:40:11.199 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user_role` r1_0 join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where r1_0.`user_id`=?
2024-05-10 21:40:11.279 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username` from `user` u1_0 where u1_0.`email`=?
2024-05-10 21:40:11.399 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id` from `user` u1_0 where u1_0.`email`=?
2024-05-10 21:40:11.509 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL.logStatement - SELECT ur.role_id FROM user u          INNER JOIN user_role ur ON u.id = ur.user_id WHERE u.id = ?
2024-05-10 21:40:12.717 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 21:40:18.632 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 21:40:18.657 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 21:40:18.666 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 21:40:18.671 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
2024-05-10 21:56:14.848 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL.logStatement - select p1_0.`id`,p1_0.`descripcion`,p1_0.`image`,p1_0.`ingredientes`,p1_0.`nombre`,p1_0.`nombre_categoria`,p1_0.`precio` from `producto` p1_0
2024-05-10 21:56:20.914 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - select u1_0.`id`,u1_0.`city`,u1_0.`creation_date`,u1_0.`email`,u1_0.`last_login`,u1_0.`name`,u1_0.`nif`,u1_0.`password`,u1_0.`postal_code`,u1_0.`username`,r1_0.`user_id`,r1_1.`id`,r1_1.`name` from `user` u1_0 left join `user_role` r1_0 on u1_0.`id`=r1_0.`user_id` left join `rol` r1_1 on r1_1.`id`=r1_0.`role_id` where u1_0.`id`=?
2024-05-10 21:56:20.919 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - insert into `pedido` (`estado`,`fecha_fin`,`fecha_inicio`,`total_pedido`,`user_id`) values (?,?,?,?,?)
2024-05-10 21:56:20.923 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL.logStatement - insert into `detalle_pedido` (`cantidad_detalle_pedido`,`pedido_id`,`precio_detalle_pedido`,`producto_id`) values (?,?,?,?)
